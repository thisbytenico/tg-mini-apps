import{_ as e,$ as t,C as a,v as o,E as l,y as s,A as r,X as n,W as d,x as i,G as u,H as c,L as m,h as f,w as p,Y as h,p as g,O as b,g as y,i as _,l as x,t as I,J as T,K as U}from"./index-CBLTQg_b.js";import{_ as P}from"./u-datetime-picker.BDTYO2Mk.js";import{_ as V}from"./u-button.D235zKSd.js";import"./u-picker.BPw4DyFW.js";import"./u-loading-icon.Bdr6stTV.js";const A=""+new URL("base_planting-CZVxBQrn.png",import.meta.url).href;const C=e({name:"",components:{},data:()=>({isDefault:!0,baseInfo:{},unitsList:[],form:{area:"",areaUnit:"",standard:"",agriProductCode:"",managerPerson:"",industryType:"",createTime:(new Date).getTime(),agriProductAlias:"",baseId:"",agriProductName:""}}),onLoad(e){t("agriculturalProduct",(e=>{if("04"==e.INDUSTRY)return a("只能选择种植，畜牧，渔业");console.log(o.dictData),this.form.agriProductName=e.NAME,this.form.industryType=e.INDUSTRY,this.form.agriProductCode=e.PRODUCT_CODE,"01"==e.INDUSTRY&&(this.unitsList=o.dictData.baseUnit),"02"==e.INDUSTRY&&(this.unitsList=o.dictData.StockbreedingAmountUnit),"03"==e.INDUSTRY&&(this.unitsList=o.dictData.FisheryAmountUnit)})),t("selectEmployee",(e=>{console.log(e),this.form.managerPerson=e.STAFF_NAME})),this.baseInfo=JSON.parse(decodeURIComponent(e.baseInfo)),console.log(this.baseInfo),this.form.baseId=this.baseInfo.ID},watch:{},computed:{},methods:{config:()=>o,actionJumpTo(e){l({url:e})},actionSubmit(){return this.form.agriProductName?this.form.managerPerson?this.form.createTime?this.form.area?void s.post("sofn-tts-web-branch/ttsScltxxcjAgriProduction/addAgriProduction?id="+r("userInfo").id,{...this.form},{header:{token:r("token")},toast:!1}).then((e=>{200==e.httpCode?(a("保存成功"),n({delta:1}),d("baseRefresh")):a(e.msg)})):a("请输入数量"):a("请选择时间"):a("请选择负责人"):a("请选择产品")},actionDelete(e){this.fileList.splice(e.index,1),i({icon:"none",title:"删除图片"})},afterRead(){},formatter:(e,t)=>"year"===e?`${t}年`:"month"===e?`${t}月`:"day"===e?`${t}日`:"hour"===e?`${t}时`:"minute"===e?`${t}分`:t,ajaxXxx(){},ajaxGetUnitList(){s.post("sofn-tts-web-branch/ttsScltxxcjScgl/getUnits",{id:o.industryCodes.find((e=>e.num===this.form.industryType)).code},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:r("token")},toast:!1}).then((e=>{this.unitsList=e}))}}},[["render",function(e,t,a,o,l,s){const r=u(c("u-navbar"),h),n=T,d=g,i=m("myContent"),C=m("myInputBox"),D=U,k=m("myFormItem"),N=m("mySelectBox"),S=m("myCheckbox"),w=u(c("u-datetime-picker"),P),R=u(c("dw-icon"),b),j=u(c("u-button"),V);return y(),f(d,{class:"produce"},{default:p((()=>[_(r,{title:"添加生产",autoBack:!0,placeholder:"",border:""}),_(d,{class:"produce-body"},{default:p((()=>[_(d,{class:"produce-goods"},{default:p((()=>[_(n,{class:"produce-goods-icon",src:A}),_(d,{class:"produce-goods-body"},{default:p((()=>[_(d,{class:"flex justify-between"},{default:p((()=>[_(d,null,{default:p((()=>[x(I(l.baseInfo.NAME),1)])),_:1})])),_:1}),_(d,{class:"flex justify-between mt8"},{default:p((()=>[_(d,{class:"text-desc ft14"},{default:p((()=>[x("面积："+I(l.baseInfo.AREA)+I(l.baseInfo.DICT_NAME),1)])),_:1}),_(d,{class:"text-desc ft14"},{default:p((()=>[x("负责人："+I(l.baseInfo.MANAGER),1)])),_:1})])),_:1})])),_:1})])),_:1}),_(k,{label:"产品和名称",col:"2"},{default:p((()=>[_(C,null,{default:p((()=>[_(i,{onClick:t[0]||(t[0]=e=>s.actionJumpTo("/pages/agriculturalProduct/index?mode=select")),placeholder:"选择产品",value:l.form.agriProductName},null,8,["value"])])),_:1}),_(C,null,{default:p((()=>[_(D,{modelValue:l.form.agriProductAlias,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.agriProductAlias=e),style:{width:"100%"},type:"text",placeholder:"输入品种名称"},null,8,["modelValue"])])),_:1})])),_:1}),_(k,{label:"数量和单位",col:"2"},{default:p((()=>[_(C,null,{default:p((()=>[_(D,{modelValue:l.form.area,"onUpdate:modelValue":t[2]||(t[2]=e=>l.form.area=e),style:{width:"100%"},type:"text",placeholder:"请输入数量"},null,8,["modelValue"])])),_:1}),_(C,null,{default:p((()=>[_(N,{modelValue:l.form.areaUnit,"onUpdate:modelValue":t[3]||(t[3]=e=>l.form.areaUnit=e),placeholder:"请选择单位",title:"单位",options:l.unitsList},null,8,["modelValue","options"])])),_:1})])),_:1}),_(k,{label:"02"==l.form.industryType?"养殖标准":"种植标准"},{default:p((()=>[_(S,{defaultValue:l.form.standard,modelValue:l.form.standard,"onUpdate:modelValue":t[4]||(t[4]=e=>l.form.standard=e),options:s.config().dictData.plantingStandard},null,8,["defaultValue","modelValue","options"])])),_:1},8,["label"]),_(k,{label:"负责人和时间",col:"2"},{default:p((()=>[_(C,null,{default:p((()=>[_(i,{value:l.form.managerPerson,onClick:t[5]||(t[5]=e=>s.actionJumpTo("/pages/employee/select")),placeholder:"请选择"},null,8,["value"])])),_:1}),_(C,null,{default:p((()=>[_(w,{modelValue:l.form.createTime,"onUpdate:modelValue":t[6]||(t[6]=e=>l.form.createTime=e),hasInput:"",mode:"date",formatter:s.formatter},null,8,["modelValue","formatter"]),_(R,{name:"right",color:"#666",size:"24rpx"})])),_:1})])),_:1})])),_:1}),_(d,{class:"produce-footer"},{default:p((()=>[_(j,{style:{background:"#00b568",color:"#fff"},onClick:s.actionSubmit},{default:p((()=>[x("保存 ")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-e0c9cc5f"]]);export{C as default};
