import{_ as e,$ as a,Q as t,a5 as o,E as s,a6 as l,y as n,A as d,x as i,G as r,H as c,h as f,w as p,O as m,p as u,Y as h,M as y,g,i as _,k as x,r as k,F as w,l as S,t as C,I as T}from"./index-BUnLS0SE.js";import{_ as b}from"./u-search.BGGYXq0-.js";import{_ as L}from"./dw-card.thw4LkDT.js";const E=e({name:"",components:{},data:()=>({keyword:"",dataList:[]}),created(){a("employeeRefresh",(()=>{this.$refs.paging.reload()}))},onUnload(){t("employeeRefresh")},watch:{},computed:{},methods:{actionSearch(){this.$refs.paging.reload()},actionCall(e){o({phoneNumber:e.PHONE})},actionToEdit(e,a){s({url:`/pages/employee/edit?type=${e}&info=${encodeURIComponent(JSON.stringify(a))}`})},actionDel(e){l({title:"确定删除该员工？",content:"删除后无法恢复",success:a=>{a.confirm&&(console.log(e),n.post("sofn-tts-web-branch/ttsScltxxcjStaff/deleteTtsScltxxcjStaff",{id:e.ID},{header:{token:d("token")},toast:!1}).then((e=>{200==e.httpCode?(i({title:"删除成功",icon:"none"}),this.$refs.paging.reload()):i({title:e.msg,icon:"none"})})))}})},queryList(e,a){console.log("queryList",e,a),console.log("queryList",e,a);let t=10*e;n.post("sofn-tts-web-branch/ttsScltxxcjStaff/getPageInfo",{start:t,length:10,staffName:this.keyword,id:d("userInfo").id},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:d("token")},toast:!1}).then((e=>{this.$refs.paging.complete(e.data.list)}))},ajaxXxx(){}}},[["render",function(e,a,t,o,s,l){const n=r(c("dw-icon"),m),d=u,i=r(c("u-navbar"),h),E=r(c("u-search"),b),j=r(c("dw-card"),L),q=r(c("z-paging"),y);return g(),f(d,{class:"employee"},{default:p((()=>[_(i,{title:"员工管理",onRightClick:a[0]||(a[0]=e=>l.actionToEdit("add")),autoBack:!0,placeholder:"",border:""},{right:p((()=>[_(d,{class:"u-nav-slot"},{default:p((()=>[_(n,{name:"adduser",size:"36rpx",color:"#666"})])),_:1})])),_:1}),_(d,null,{default:p((()=>[_(E,{style:{background:"#fff",padding:"12rpx 24rpx",flex:"0 0 auto"},class:"address-search",shape:"square",placeholder:"请输入姓名搜索",modelValue:s.keyword,"onUpdate:modelValue":a[1]||(a[1]=e=>s.keyword=e),showAction:!1,onSearch:l.actionSearch,onCustom:l.actionSearch},null,8,["modelValue","onSearch","onCustom"])])),_:1}),_(d,{class:"employee-body"},{default:p((()=>[_(q,{"default-page-no":"0",fixed:!1,ref:"paging",modelValue:s.dataList,"onUpdate:modelValue":a[2]||(a[2]=e=>s.dataList=e),onQuery:l.queryList,"empty-view-text":"为保证您能正常使用\\n产品，请点击右上角添加员工"},{default:p((()=>[(g(!0),x(w,null,k(s.dataList,((e,a)=>(g(),f(d,{class:"employee-item",key:a},{default:p((()=>[_(j,{shape:"square"},{header:p((()=>[_(d,{class:"employee-item-header"},{default:p((()=>[_(d,{class:"employee-item-header-title"},{default:p((()=>[S(C(e.STAFF_NAME)+" ",1),"Y"==e.DEFAULT_STATUS?(g(),f(d,{key:0,class:"employee-item-tag ml12"},{default:p((()=>[S("默认")])),_:1})):T("",!0)])),_:2},1024),_(d,{class:"employee-item-header-tel"},{default:p((()=>[S(C(e.PHONE),1)])),_:2},1024)])),_:2},1024)])),default:p((()=>[_(d,{class:"employee-item-footer"},{default:p((()=>[_(d,{class:"employee-item-footer-call",onClick:a=>l.actionCall(e)},{default:p((()=>[_(n,{name:"phone-fill",size:"28rpx"}),S(" 拨打电话 ")])),_:2},1032,["onClick"]),_(d,{class:"employee-item-footer-edit",onClick:a=>l.actionToEdit("edit",e)},{default:p((()=>[_(n,{name:"edit-square",size:"28rpx"}),S(" 编辑 ")])),_:2},1032,["onClick"]),_(d,{class:"employee-item-footer-del",onClick:a=>l.actionDel(e)},{default:p((()=>[_(n,{name:"delete",size:"28rpx"}),S(" 删除 ")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["modelValue","onQuery"])])),_:1})])),_:1})}],["__scopeId","data-v-5574027f"]]);export{E as default};
