import{_ as t,x as e,y as a,A as c,B as s,E as o,a6 as i,G as l,H as r,h as d,w as n,p as u,Y as p,aG as h,O as m,ad as f,a4 as b,M as k,g as y,i as w,l as P,n as T,t as g,k as _,r as S,F as x,I as N,ai as C,J as j}from"./index-BUnLS0SE.js";import{_ as L}from"./dw-cell-group.D545zRM2.js";import{P as I}from"./pageFooter.C-7UZqFn.js";import{B}from"./batchItem.j1MqI2vt.js";import{B as F}from"./batchItem2.Dly0R7Y8.js";import{_ as U}from"./meat.BL_rj_au.js";import"./index.CItzj2I-.js";const E=t({name:"",components:{PageFooter:I,BatchItem:B,BatchItem2:F},data:()=>({productNameList:"",productType:"",isShowProductTypePicker:!1,productName:"",isShowProductNamePicker:!1,dataList:[],isShowMenu:!1,isShowBatchPopup:!1,productTypeList:[]}),onLoad(t){this.ajaxGetProductTypeList()},watch:{},computed:{},methods:{actionSelectProductType(t){this.productType=t,this.isShowProductTypePicker=!1,this.ajaxGetProductNameList(),this.$refs.paging.reload()},changeChecked(t,e){e.checked=t},actionSelectProductName(t){this.productName=t.productName,this.isShowProductNamePicker=!1,this.$refs.paging.reload()},actionSubmit(){let t=this.dataList.filter((t=>t.checked)).map((t=>t.ID)).join(",");t<2?e({title:"至少选择两天信息",icon:"none"}):a.post("sofn-tts-web-branch/ttsScltxxcjScgl/addCppchc",{entity_id:c("userInfo").id,spids:t},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:c("token")},toast:!1}).then((t=>{200==t.httpCode?(e({title:"批次合并成功",icon:"none"}),s({url:"/pages/batch/index"})):e({title:t.msg,icon:"none"})}))},actionJumpTo(t){o({url:t})},actionDelete(){i({title:"确认删除该批次？",success:()=>{e({title:"点击确定",icon:"none"})}})},queryList(t,e){let s=10*t;a.post("sofn-tts-web-branch/ttsScltxxcjScgl/getPageInfoPchc",{start:s,length:10,productSort:this.productType,productName:this.productName,entity_id:c("userInfo").id},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:c("token")},toast:!1}).then((t=>{t.data.list.forEach((t=>{t.checked=!1})),this.$refs.paging.complete(t.data.list)}))},ajaxXxx(){},ajaxGetProductTypeList(){a.post("sofn-tts-web-branch/ttsScltxxcjScgl/getProType",{id:c("userInfo").id,isHc:"hc"},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:c("token")},toast:!1}).then((t=>{this.productTypeList=t}))},ajaxGetProductNameList(){a.post("/sofn-tts-web-branch/ttsScltxxcjScgl/getProName",{id:c("userInfo").id,isHc:"hc",typeName:this.productType},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:c("token")},toast:!1}).then((t=>{this.productNameList=t}))}}},[["render",function(t,e,a,c,s,o){const i=u,I=l(r("u-navbar"),p),B=l(r("u-overlay"),h),F=l(r("dw-icon"),m),E=l(r("u-checkbox"),f),D=j,G=l(r("dw-cell"),b),v=l(r("dw-cell-group"),L),O=l(r("z-paging"),k);return y(),d(i,{class:"batch"},{default:n((()=>[w(I,{title:"批次合并",autoBack:!0,onRightClick:o.actionSubmit,placeholder:"",border:""},{right:n((()=>[w(i,{class:"u-nav-slot"},{default:n((()=>[P(" 合并 ")])),_:1})])),_:1},8,["onRightClick"]),w(i,{class:"batch-tabs"},{default:n((()=>[w(B,{show:s.isShowProductTypePicker,onClick:e[0]||(e[0]=t=>s.isShowProductTypePicker=!1),opacity:"0"},null,8,["show"]),w(i,{class:T(["batch-tabs-select mb4",{upper:s.isShowProductTypePicker}]),onClick:e[1]||(e[1]=t=>s.isShowProductTypePicker=!0)},{default:n((()=>[w(i,{class:T(["batch-tabs-select-title",{placeholder:!s.productType}])},{default:n((()=>[P(g(s.productType||"请选择"),1)])),_:1},8,["class"]),w(F,{name:"down",size:"24rpx",color:"#ccc"}),s.isShowProductTypePicker?(y(),d(i,{key:0,class:"batch-tabs-select-body"},{default:n((()=>[(y(!0),_(x,null,S(s.productTypeList,((t,e)=>(y(),d(i,{key:e,class:"batch-tabs-select-body-item",onClick:C((e=>o.actionSelectProductType(t.productSort)),["stop"])},{default:n((()=>[P(g(t.productSort),1)])),_:2},1032,["onClick"])))),128))])),_:1})):N("",!0)])),_:1},8,["class"]),w(B,{show:s.isShowProductNamePicker,onClick:e[2]||(e[2]=t=>s.isShowProductNamePicker=!1),opacity:"0"},null,8,["show"]),w(i,{class:T(["batch-tabs-select",{upper:s.isShowProductNamePicker}]),onClick:e[3]||(e[3]=t=>s.isShowProductNamePicker=!0)},{default:n((()=>[w(i,{class:T(["batch-tabs-select-title",{placeholder:!s.productName}])},{default:n((()=>[P(g(s.productName||"请选择"),1)])),_:1},8,["class"]),w(F,{name:"down",size:"24rpx",color:"#ccc"}),s.isShowProductNamePicker?(y(),d(i,{key:0,class:"batch-tabs-select-body"},{default:n((()=>[(y(!0),_(x,null,S(s.productNameList,((t,e)=>(y(),d(i,{key:e,class:"batch-tabs-select-body-item",onClick:C((e=>o.actionSelectProductName(t)),["stop"])},{default:n((()=>[P(g(t.productName),1)])),_:2},1032,["onClick"])))),128))])),_:1})):N("",!0)])),_:1},8,["class"])])),_:1}),w(i,{class:"batch-body"},{default:n((()=>[w(O,{"default-page-no":"0",fixed:!1,ref:"paging",modelValue:s.dataList,"onUpdate:modelValue":e[4]||(e[4]=t=>s.dataList=t),onQuery:o.queryList},{default:n((()=>[w(v,null,{default:n((()=>[(y(!0),_(x,null,S(s.dataList,((t,e)=>(y(),d(G,{footerBorder:!1,background:"transparent"},{prefix:n((()=>[w(i,{class:"flex"},{default:n((()=>[w(E,{onChange:e=>o.changeChecked(e,t),checked:t.checked,shape:"circle",activeColor:"#00B568"},null,8,["onChange","checked"]),w(D,{class:"batch-item-img",src:U})])),_:2},1024)])),default:n((()=>[w(i,{class:"flex justify-between items-center"},{default:n((()=>[w(i,{class:"batch-item-title"},{default:n((()=>[P(g(t.PRODUCT_NAME),1)])),_:2},1024),w(i,{class:"ft18",style:{color:"#FD9125"}},{default:n((()=>[P(g(t.STORE_COUNT),1)])),_:2},1024)])),_:2},1024),w(i,{class:"flex justify-between items-center"},{default:n((()=>[w(i,{class:"batch-item-code"},{default:n((()=>[w(i,{class:"batch-item-code-title"},{default:n((()=>[P("追溯码:")])),_:1}),w(i,{class:"batch-item-code-content"},{default:n((()=>[P(g(t.ENTITY_IDCODE),1)])),_:2},1024)])),_:2},1024),w(i,{class:"batch-item-date"},{default:n((()=>[P(" 收获数量("+g(t.HARVEST_UNIT)+") ",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1},8,["modelValue","onQuery"])])),_:1})])),_:1})}],["__scopeId","data-v-5f71b6d9"]]);export{E as default};
