import{_ as t,al as e,a6 as l,y as a,A as s,x as o,X as i,W as n,v as d,G as c,H as u,h as r,w as f,ah as h,Y as p,p as _,g as y,i as b,l as m,t as g,I as x,k as T,r as w,F as S,J as k,ak as C}from"./index-BUnLS0SE.js";const P=t({name:"",components:{},data:()=>({timeFormat:e,id:"",info:{},list:[],batchSources:[],rzType:"",loss:[]}),created(){},onLoad(t){this.id=t.id,this.getProductInfo(),this.getBatchInfo()},watch:{},computed:{},methods:{setText(){let t="",e="",l="";return"采购"==this.info.productSource?(t="采购时间",e="采购数量"):"收购"==this.info.productSource?(t="收购时间",e="收购数量",l="加工车间"):("1"==this.info.joinFlag&&(t="收获时间",e="收获数量",l="收获基地"),"2"==this.info.joinFlag&&(t="出栏数量",l="出栏圈舍"),"3"==this.info.joinFlag&&(t="屠宰时间",e="屠宰数量",l="出栏圈舍"),"4"==this.info.joinFlag&&(t="收获时间",e="收获数量"),"5"==this.info.joinFlag&&(t="加工时间",e="加工数量",l="加工车间")),{timeText:t,numText:e,jidiText:l}},del(){let t=this.id;l({title:"提示",content:"确定删除吗？",success(e){e.confirm&&a.post("sofn-tts-web-branch/ttsScltxxcjScgl/deleteTtsScltxxcjScgl",{id:t},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:s("token")},toast:!1}).then((t=>{200==t.httpCode&&o({title:"删除成功",icon:"none",duration:1500,success(){setTimeout((()=>{i(),n("refreshBathList")}),1500)}})}))}})},doSomething(){},getProductInfo(){a.post("sofn-tts-web-branch/ttsScltxxcjScgl/getproductInfo",{id:this.id},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:s("token")},toast:!1}).then((t=>{console.log(t.data),this.info=t.data,t.batchSources.forEach((t=>{t.sourcePath=d.baseUrl+"/sofn-sys-web/sysTemplate/downPic?fileUrl="+t.sourcePath})),this.batchSources=t.batchSources,t.loss.forEach((t=>{t.isShow=!1})),this.loss=t.loss,this.rzType="",t.ttsSpybWghPcs.length>0&&(this.rzType+="无公害食品"),t.ttsSpybLvsePcs.length>0&&(this.rzType+="绿色食品"),t.ttsSpybYoujiPcs.length>0&&(this.rzType+="有机食品"),t.ttsSpybDiBiaoPcs.length>0&&(this.rzType+="地标食品"),this.rzType||(this.rzType="无")}))},getBatchInfo(t){a.post("sofn-tts-web-branch/ttsScltxxcjCppchc/getPageInfo",{hcid:this.id,start:0,length:99999},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:s("token")},toast:!1}).then((t=>{this.list=t.data.list}))}}},[["render",function(t,e,l,a,s,o){const i=c(u("u-icon"),h),n=c(u("u-navbar"),p),d=_,P=k,E=C;return y(),r(d,{class:"batch-detail"},{default:f((()=>[b(n,{title:"批次详情",autoBack:!0,placeholder:"",border:""},{right:f((()=>[b(i,{onClick:o.del,name:"trash",size:"20"},null,8,["onClick"])])),_:1}),b(d,{class:"batch-detail-body"},{default:f((()=>[s.list.length>0?(y(),r(d,{key:0,class:"batch-detail-section",style:{display:"flex","align-items":"center"}},{default:f((()=>[b(d,{style:{width:"100px"}},{default:f((()=>[m("组合码")])),_:1}),b(d,{style:{color:"#49d313"},class:"u-line-2"},{default:f((()=>[m(g(s.info.productPc),1)])),_:1})])),_:1})):x("",!0),b(d,{class:"batch-detail-section flex"},{default:f((()=>[b(d,{class:"batch-detail-goodsicon"},{default:f((()=>[(y(!0),T(S,null,w(s.batchSources.filter((t=>"image"===t.sourceType)).slice(0,1),((t,e)=>(y(),r(P,{class:"batch-detail-goodsicon-img",style:{width:"100%",height:"100%"},mode:"aspectFit",src:t.sourcePath},null,8,["src"])))),256))])),_:1}),b(d,null,{default:f((()=>[b(d,{class:"ft20 mb2"},{default:f((()=>[m(g(s.info.productName),1)])),_:1}),b(d,null,{default:f((()=>[m("产品种类："+g(s.info.productSort),1)])),_:1}),s.list.length>0?(y(),r(d,{key:0,class:"u-line-2"},{default:f((()=>[m("产品溯源码："+g(s.info.productPc),1)])),_:1})):x("",!0),b(d,null,{default:f((()=>[m(g(o.setText().timeText)+"："+g(s.timeFormat(s.info.harvestTime,"yyyy-mm-dd")),1)])),_:1}),b(d,null,{default:f((()=>[m(g(o.setText().numText)+"："+g(s.info.productAmount)+g(s.info.harvestUnit),1)])),_:1})])),_:1})])),_:1}),b(d,{class:"batch-detail-section",style:{"word-break":"break-all"}},{default:f((()=>[b(d,null,{default:f((()=>[m("库存数量："+g(s.info.storeCount)+"千克",1)])),_:1}),b(d,null,{default:f((()=>[m("报损数量："+g(s.info.loss)+"千克",1)])),_:1}),0==s.list.length?(y(),r(d,{key:0,class:"u-line-2"},{default:f((()=>[m("产品追溯码："+g(s.info.productPc),1)])),_:1})):x("",!0),b(d,null,{default:f((()=>[m("产品来源："+g(s.info.productSource),1)])),_:1}),b(d,null,{default:f((()=>[m("上游企业名称："+g(s.info.upEntName||"无"),1)])),_:1})])),_:1}),b(d,{class:"batch-detail-section"},{default:f((()=>[b(d,null,{default:f((()=>[m("质检情况："+g(s.info.mediCheck),1)])),_:1}),b(d,null,{default:f((()=>[m("质检结论："+g(s.info.mediResult),1)])),_:1}),"02"==s.info.productIndustry?(y(),r(d,{key:0},{default:f((()=>[m("检疫证号："+g(s.info.proofNumber),1)])),_:1})):x("",!0),0==s.list.length?(y(),r(d,{key:1},{default:f((()=>[b(d,null,{default:f((()=>[m(g(o.setText().jidiText)+"："+g(s.info.harvestBasename||"无"),1)])),_:1}),b(d,null,{default:f((()=>[m("认证类型：无")])),_:1}),b(d,null,{default:f((()=>[m("证书/产品编号：无")])),_:1}),b(d,null,{default:f((()=>[m("认证产品名称：无")])),_:1})])),_:1})):x("",!0)])),_:1}),b(d,{class:"batch-detail-section"},{default:f((()=>[b(d,{class:"batch-detail-section-header"},{default:f((()=>[m("图片")])),_:1}),b(d,{class:"batch-detail-section-body"},{default:f((()=>[(y(!0),T(S,null,w(s.batchSources.filter((t=>"image"===t.sourceType)),((t,e)=>(y(),r(P,{style:{width:"250rpx",height:"150rpx"},mode:"aspectFit",src:t.sourcePath},null,8,["src"])))),256)),0==s.batchSources.filter((t=>"image"===t.sourceType)).length?(y(),r(d,{key:0},{default:f((()=>[m("暂无图片")])),_:1})):x("",!0)])),_:1})])),_:1}),b(d,{class:"batch-detail-section"},{default:f((()=>[b(d,{class:"batch-detail-section-header"},{default:f((()=>[m("视频")])),_:1}),b(d,{class:"batch-detail-section-body"},{default:f((()=>[(y(!0),T(S,null,w(s.batchSources.filter((t=>"video"===t.sourceType)),((t,e)=>(y(),r(d,{style:{position:"relative"}},{default:f((()=>[b(E,{style:{width:"100%",height:"220rpx"},mode:"aspectFit",src:t.sourcePath},null,8,["src"])])),_:2},1024)))),256)),0==s.batchSources.filter((t=>"video"===t.sourceType)).length?(y(),r(d,{key:0},{default:f((()=>[m("暂无视频")])),_:1})):x("",!0)])),_:1})])),_:1}),s.loss.length>0?(y(),r(d,{key:1,class:"batch-detail-section"},{default:f((()=>[b(d,{class:"batch-detail-section-header"},{default:f((()=>[m("报损明细")])),_:1}),b(d,{class:"batch-detail-section-body"},{default:f((()=>[(y(!0),T(S,null,w(s.loss,((t,e)=>(y(),r(d,{key:e},{default:f((()=>[b(d,{style:{position:"relative",padding:"20rpx","text-align":"center","border-bottom":"1px solid #ddd",display:"flex","justify-content":"space-between"}},{default:f((()=>[b(d,null,{default:f((()=>[b(d,{style:{"margin-bottom":"20rpx"}},{default:f((()=>[m(g(t.lossType),1)])),_:2},1024),b(d,null,{default:f((()=>[m(g(s.timeFormat(t.createTime,"yyyy-mm-dd")),1)])),_:2},1024)])),_:2},1024),b(d,{style:{display:"flex","align-items":"center"}},{default:f((()=>[b(d,null,{default:f((()=>[b(d,{style:{color:"#f9ae3d","margin-bottom":"20rpx"}},{default:f((()=>[m(g(t.loss)+g(t.lossUnit),1)])),_:2},1024),b(d,null,{default:f((()=>[m("报损数量")])),_:1})])),_:2},1024),b(d,null,{default:f((()=>[b(i,{onClick:e=>t.isShow=!t.isShow,name:t.isShow?"arrow-up":"arrow-down",color:"#aaa",size:"20"},null,8,["onClick","name"])])),_:2},1024)])),_:2},1024)])),_:2},1024),t.isShow?(y(),r(d,{key:0,style:{padding:"20rpx",background:"#eee",width:"100%","box-sizing":"border-box"}},{default:f((()=>[m(g(t.lossReason),1)])),_:2},1024)):x("",!0)])),_:2},1024)))),128))])),_:1})])),_:1})):x("",!0),s.list.length>0?(y(),r(d,{key:2,class:"batch-detail-section"},{default:f((()=>[b(d,{class:"batch-detail-section-header"},{default:f((()=>[m("合成前批次信息")])),_:1}),b(d,{class:"batch-detail-section-body"},{default:f((()=>[(y(!0),T(S,null,w(s.list,((t,e)=>(y(),r(d,{key:e},{default:f((()=>[b(d,{style:{position:"relative",padding:"20rpx","text-align":"center","border-bottom":"1px solid #ddd",display:"flex","justify-content":"space-between"}},{default:f((()=>[b(d,null,{default:f((()=>[b(d,{style:{"margin-bottom":"20rpx"}},{default:f((()=>[m(g(t.lossType),1)])),_:2},1024),b(d,null,{default:f((()=>[m("产品信息"+g(e+1),1)])),_:2},1024)])),_:2},1024),b(d,{style:{display:"flex","align-items":"center"}},{default:f((()=>[b(d,null,{default:f((()=>[b(i,{onClick:e=>t.isShow=!t.isShow,name:t.isShow?"arrow-up":"arrow-down",color:"#aaa",size:"20"},null,8,["onClick","name"])])),_:2},1024)])),_:2},1024)])),_:2},1024),t.isShow?(y(),r(d,{key:0,style:{padding:"20rpx",background:"#eee",width:"100%","box-sizing":"border-box","line-height":"80rpx"}},{default:f((()=>[b(d,null,{default:f((()=>[m("产品名称："+g(t.PRODUCT_NAME),1)])),_:2},1024),b(d,null,{default:f((()=>[m("收获时间："+g(s.timeFormat(t.HARVEST_TIME,"yyyy-mm-dd")),1)])),_:2},1024),b(d,null,{default:f((()=>[m("收获数量："+g(t.PRODUCT_AMOUNT)+g(t.HARVEST_UNIT),1)])),_:2},1024),b(d,{class:"u-line-1"},{default:f((()=>[m("产品追溯码："+g(t.PRODUCT_PC_NEW),1)])),_:2},1024),b(d,null,{default:f((()=>[m("产品来源："+g(t.PRODUCT_SOURCE),1)])),_:2},1024),b(d,null,{default:f((()=>[m("质检情况："+g(t.MEDI_CHECK),1)])),_:2},1024),b(d,null,{default:f((()=>[m("质检结论："+g(t.MEDI_RESULT),1)])),_:2},1024),b(d,null,{default:f((()=>[m("收获基地："+g(t.HARVEST_BASENAME),1)])),_:2},1024)])),_:2},1024)):x("",!0)])),_:2},1024)))),128))])),_:1})])),_:1})):x("",!0)])),_:1})])),_:1})}],["__scopeId","data-v-2ed7e158"]]);export{P as default};
