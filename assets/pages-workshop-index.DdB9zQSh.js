import{_ as e,$ as s,Q as o,v as a,y as t,A as l,E as c,C as i,G as n,H as r,h as d,w as p,Y as h,M as u,g as k,i as f,l as m,k as w,r as g,F as _,p as y,t as S,I as C,J as x,q as T}from"./index-BUnLS0SE.js";import{_ as b}from"./u-search.BGGYXq0-.js";import{_ as j,a as U}from"./u-collapse.DMXlTfXW.js";import{_ as I,a as L,b as D}from"./close.CMaCRtOu.js";import{_ as $}from"./detail.B9Xdclzn.js";import"./u-cell.BmG7_r4p.js";const E=e({name:"",components:{},data:()=>({keyword:"",dataList:[]}),onLoad(e){s("refreshWorkshopList",(()=>{this.$refs.paging.reload()}))},onUnload(){o("refreshWorkshopList")},watch:{},computed:{},methods:{actionSearch(){this.$refs.paging.reload()},config:()=>a,actionPause(e,s){t.post("/sofn-tts-web-branch/ttsScltxxcjWorkShop/changeBaseStatus",{id:e.ID,status:s},{header:{token:l("token")},toast:!1}).then((e=>{this.$refs.paging.reload()}))},actionToEdit(e,s){c({url:`/pages/workshop/edit?type=${e}&info=${encodeURIComponent(JSON.stringify(s))}`})},actionToDetail(e){c({url:"/pages/workshop/detail?info="+encodeURIComponent(JSON.stringify(e))})},actionDelete(e){t.post("sofn-tts-web-branch/ttsScltxxcjWorkShop/deleteTtsScltxxcjWorkShop",{id:e.ID,token:l("token")},{header:{token:l("token")},toast:!1}).then((e=>{200==e.httpCode?i("删除成功"):i(e.msg),this.$refs.paging.reload()}))},queryList(e,s){let o=30*e;t.post("sofn-tts-web-branch/ttsScltxxcjWorkShop/getPageInfo",{start:o,length:30,id:l("userInfo").id,name:this.keyword,token:l("token")},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:l("token")},toast:!1}).then((e=>{this.$refs.paging.complete(e.data.list)}))},ajaxXxx(){}}},[["render",function(e,s,o,a,t,l){const c=y,i=n(r("u-navbar"),h),E=n(r("u-search"),b),A=x,P=T,V=n(r("u-collapse-item"),j),W=n(r("u-collapse"),U),q=n(r("z-paging"),u);return k(),d(q,{"default-page-size":"30","default-page-no":"0",ref:"paging",modelValue:t.dataList,"onUpdate:modelValue":s[2]||(s[2]=e=>t.dataList=e),onQuery:l.queryList},{top:p((()=>[f(i,{title:"车间管理",onRightClick:s[0]||(s[0]=e=>l.actionToEdit("add")),autoBack:!0,placeholder:"",border:""},{right:p((()=>[f(c,{class:"u-nav-slot"},{default:p((()=>[m("新增车间")])),_:1})])),_:1}),f(E,{style:{background:"#fff",padding:"12rpx 24rpx",flex:"0 0 auto"},class:"address-search",shape:"square",placeholder:"请输入车间名称和关键字",modelValue:t.keyword,"onUpdate:modelValue":s[1]||(s[1]=e=>t.keyword=e),showAction:!1,onSearch:l.actionSearch,onCustom:l.actionSearch},null,8,["modelValue","onSearch","onCustom"])])),default:p((()=>[f(c,{class:"workshop"},{default:p((()=>[f(c,{class:"workshop-body"},{default:p((()=>[f(W,{accordion:""},{default:p((()=>[(k(!0),w(_,null,g(t.dataList,(e=>(k(),d(V,{name:e.id,key:e.id},{title:p((()=>[f(c,{class:"workshop-item"},{default:p((()=>[f(A,{class:"workshop-item-icon",src:l.config().baseUrl+"/sofn-sys-web/sysTemplate/downPic?fileUrl="+e.PICTURE},null,8,["src"]),f(c,null,{default:p((()=>[f(c,null,{default:p((()=>[m(S(e.NAME)+" ",1),"N"==e.STATUS?(k(),d(P,{key:0,style:{color:"#f9ae3d"}},{default:p((()=>[m("已停用")])),_:1})):C("",!0)])),_:2},1024),f(c,{class:"ft14 text-desc"},{default:p((()=>[m(S(e.ADDRESS),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),default:p((()=>[f(c,{class:"workshop-collapse"},{default:p((()=>["Y"==e.STATUS?(k(),d(c,{key:0,class:"workshop-collapse-item",onClick:s=>l.actionPause(e,"N")},{default:p((()=>[f(A,{class:"workshop-collapse-item-icon",src:I}),f(c,{class:"workshop-collapse-item-title"},{default:p((()=>[m("停用")])),_:1})])),_:2},1032,["onClick"])):(k(),d(c,{key:1,class:"workshop-collapse-item",onClick:s=>l.actionPause(e,"Y")},{default:p((()=>[f(A,{class:"workshop-collapse-item-icon",src:I}),f(c,{class:"workshop-collapse-item-title"},{default:p((()=>[m("启用")])),_:1})])),_:2},1032,["onClick"])),f(c,{class:"workshop-collapse-item",onClick:s=>l.actionToDetail(e)},{default:p((()=>[f(A,{class:"workshop-collapse-item-icon",src:$}),f(c,{class:"workshop-collapse-item-title"},{default:p((()=>[m("详情")])),_:1})])),_:2},1032,["onClick"]),f(c,{class:"workshop-collapse-item",onClick:s=>l.actionToEdit("edit",e)},{default:p((()=>[f(A,{class:"workshop-collapse-item-icon",src:L}),f(c,{class:"workshop-collapse-item-title"},{default:p((()=>[m("编辑")])),_:1})])),_:2},1032,["onClick"]),f(c,{class:"workshop-collapse-item",onClick:s=>l.actionDelete(e)},{default:p((()=>[f(A,{class:"workshop-collapse-item-icon",src:D}),f(c,{class:"workshop-collapse-item-title"},{default:p((()=>[m("删除")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["name"])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","onQuery"])}],["__scopeId","data-v-611531cd"]]);export{E as default};
