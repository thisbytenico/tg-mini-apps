import{_ as e,v as a,T as n,y as l,A as t,U as i,x as o,E as s,R as c,C as d,S as m,G as f,H as u,L as r,k as p,i as h,w as I,F as y,Y as g,p as b,O as x,g as _,l as w,h as C,t as T,I as N,r as U,Z as V,q as A,J as S,K as k,n as B}from"./index-BUnLS0SE.js";import{_ as j}from"./u-textarea.DPQ_Uf-A.js";import{_ as v}from"./u-button.CcUwV2uO.js";import"./u-loading-icon.0GWBobeR.js";const L=e({name:"",components:{},data:()=>({val:"asdas",collapse1:!1,collapse2:!1,areaText:"",mainInfo:{}}),created(){this.getInfo(),this.getRegiterByAccount()},watch:{},computed:{},methods:{config:()=>a,getInfo(){n({title:"加载中...",mask:!0}),l.post("sofn-tts-web-branch/ttsScltxxcjAllUser/getTtsScltxxcjUserByToken",{id:t("userInfo").id,token:t("token")},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:t("token")},toast:!1}).then((e=>{this.$refs.myLocationRef.modelValue=this.mainInfo.longitude+"-"+this.mainInfo.latitude,this.getPosition()})).finally((()=>{i()}))},getRegiterByAccount(){l.post("/sofn-tts-web-branch/ttsScltxxcjRegiter/getRegiterByAccount?account="+this.$cookies.get("username"),{},{header:{token:t("token")}}).then((e=>{this.regiterByAccount=e,this.mainInfo={...e.vo}}))},getPosition(){l.post("/sofn-sys-web/region/queryRegionFullName",{regionCode:this.mainInfo.area},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:t("token")},toast:!1}).then((e=>{this.areaText=e.data,console.log(e)}))},actionSubmit(){l.post("sofn-tts-web-branch/ttsScltxxcjUserChangeRecord/addTtsScltxxcjUserChangeRecord",{account:this.mainInfo.account,address:this.mainInfo.address,annualOutput:this.mainInfo.annualOutput,annualOutputS:this.mainInfo.annualOutputS,annualOutputX:this.mainInfo.annualOutputX,applyUpdateEntityIdcode:this.mainInfo.applyUpdateEntityIdcode,applyUpdateName:this.mainInfo.applyUpdateName,applyUpdateUserIdcode:this.mainInfo.applyUpdateUserIdcode,applyUserId:this.mainInfo.applyUserId,approveName:this.mainInfo.approveName,approveOpinion:"",approveStatus:"0",approveTime:this.mainInfo.approveTime,approveType:"2",approveUserIdcode:this.mainInfo.approveUserIdcode,area:this.mainInfo.area,businessLicenceimg:this.mainInfo.businessLicenceimg,cardType:this.mainInfo.cardType,changeType:"1",contactEmail:this.mainInfo.contactEmail,contactIdCardType:"ID",contactName:this.mainInfo.contactName,contactPhone:this.mainInfo.contactPhone,creditCode:this.mainInfo.creditCode,delFlag:this.mainInfo.delFlag,diBiao:this.mainInfo.diBiao,enterpriseName:this.mainInfo.enterpriseName,entityId:this.mainInfo.entityId,entityIdcode:this.mainInfo.entityIdcode,entityIndustry:this.mainInfo.entityIndustry,entityIndustryName:this.mainInfo.entityIndustryName,entityProperty:this.mainInfo.entityProperty,entityPropertyName:this.mainInfo.entityPropertyName,entityScale:this.mainInfo.entityScale,entityScaleName:this.mainInfo.entityScaleName,entityType:this.mainInfo.entityType,entityTypeName:this.mainInfo.entityTypeName,faxNumber:this.mainInfo.faxNumber,handIdcardimg:this.mainInfo.handIdcardimg,id:this.mainInfo.id,idcode:this.mainInfo.idcode,infoUnique:this.mainInfo.infoUnique,isLong:this.mainInfo.isLong,isMain:"1",latitude:this.mainInfo.latitude,legalIdCardType:this.mainInfo.legalIdCardType,legalIdnumber:this.mainInfo.legalIdnumber,legalImages:this.mainInfo.legalImages,legalName:this.mainInfo.legalName,legalPhone:this.mainInfo.legalPhone,longitude:this.mainInfo.longitude,negativeIdcardimg:this.mainInfo.negativeIdcardimg,nongKen:this.mainInfo.nongKen,organizationCertificateimg:this.mainInfo.organizationCertificateimg,organizationCode:this.mainInfo.organizationCode,positiveIdcardeimg:this.mainInfo.positiveIdcardeimg,realName:this.mainInfo.realName,reason:this.mainInfo.reason||"松岛枫你是东方",registerTime:this.mainInfo.registerTime,unit:this.mainInfo.unit,unitName:this.mainInfo.unitName,unitNameS:this.mainInfo.unitNameS,unitNameX:this.mainInfo.unitNameX,unitS:this.mainInfo.unitS,unitX:this.mainInfo.unitX,updateBeforeJson:JSON.stringify(this.regiterByAccount.vo),updateContent:this.mainInfo.updateContent,userIdcode:this.mainInfo.userIdcode},{header:{token:t("token")}})},actionClick(e){o({title:e,duration:2e3})},actionToEdit(){s({url:"/pages/mainInfo/edit?pageTitle=主体信息详情"})},actionScan(){c({count:1,success:async e=>{let a=await this.uploadFilePromise(e.tempFilePaths[0]);l.post("sofn-tts-web-branch//ttsScltxxcjEmpInfo/updateEmpInfo",{id:this.info.id,headUrl:a},{header:{token:t("token")},toast:!1}).then((e=>{200==e.httpCode?(this.getInfo(),o({icon:"none",title:"修改成功"})):d(e.msg)}))}})},uploadFilePromise:e=>new Promise(((n,l)=>{m({url:a.baseUrl+"/sofn-tts-web-branch/ttsScltxxcjRegiter/upload?fileapi17268223914946",filePath:e,name:"file",formData:{},success:e=>{let a=JSON.parse(e.data);n(a.path)}})})),actionUploadImage(){c({success:e=>{e.tempFilePaths}})},doSomething(){},ajaxXxx(){}}},[["render",function(e,a,n,l,t,i){const o=f(u("u-navbar"),g),s=A,c=b,d=f(u("dw-icon"),x),m=S,L=k,P=r("myCity"),R=r("myLocation"),G=f(u("u-textarea"),j),E=f(u("u-button"),v);return _(),p(y,null,[h(o,{title:"主体变更",autoBack:!0,border:"",placeholder:""}),h(c,{class:"main-info"},{default:I((()=>[h(c,{class:"main-info-section"},{default:I((()=>[h(c,{class:"main-info-section-title mb10 flex items-center justify-between",onClick:a[0]||(a[0]=e=>t.collapse1=!t.collapse1)},{default:I((()=>[h(c,null,{default:I((()=>[w("核心信息变更 "),h(s,{class:"ft14"},{default:I((()=>[w("(需提交监管部门审核)")])),_:1})])),_:1}),h(d,{name:"down",size:"20rpx",color:"#666"})])),_:1}),t.collapse1?N("",!0):(_(),C(c,{key:0},{default:I((()=>[h(c,{class:"main-info-section-title flex items-center ft14",onClick:i.actionScan},{default:I((()=>[h(m,{class:"mr3",style:{width:"28rpx",height:"28rpx"},src:"data:image/png;base64,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"}),w(" "+T("个人"===t.mainInfo.entityScaleName?"识别身份证":"识别营业执照"),1)])),_:1},8,["onClick"]),"个人"===t.mainInfo.entityScaleName?(_(),C(c,{key:0,class:"main-info-section-body"},{default:I((()=>[h(c,{class:"main-info-cell"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("主体名称")])),_:1}),h(c,{class:"main-info-cell-body"},{default:I((()=>[h(c,{class:"main-info-cell-view"},{default:I((()=>[h(L,{type:"text",modelValue:t.mainInfo.enterpriseName,"onUpdate:modelValue":a[1]||(a[1]=e=>t.mainInfo.enterpriseName=e),placeholder:"请输入主体名称","placeholder-style":"color:#999;"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(c,{class:"main-info-cell"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("姓名")])),_:1}),h(c,{class:"main-info-cell-body"},{default:I((()=>[h(c,{class:"main-info-cell-view"},{default:I((()=>[h(L,{type:"text",modelValue:t.mainInfo.contactName,"onUpdate:modelValue":a[2]||(a[2]=e=>t.mainInfo.contactName=e),placeholder:"请输入法定代表人","placeholder-style":"color:#999;"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(c,{class:"main-info-cell"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("身份证号码")])),_:1}),h(c,{class:"main-info-cell-body"},{default:I((()=>[h(c,{class:"main-info-cell-view"},{default:I((()=>[h(L,{type:"text",modelValue:t.mainInfo.idcode,"onUpdate:modelValue":a[3]||(a[3]=e=>t.mainInfo.idcode=e),placeholder:"请输入法人身份证号码","placeholder-style":"color:#999;"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(c,{class:"main-info-cell"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("详细地址")])),_:1}),h(c,{class:"main-info-cell-body"},{default:I((()=>[h(c,{class:"main-info-cell-view"},{default:I((()=>[h(L,{type:"text",modelValue:t.mainInfo.address,"onUpdate:modelValue":a[4]||(a[4]=e=>t.mainInfo.address=e),placeholder:"请输入详细地址","placeholder-style":"color:#999;"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(c,{class:"main-info-cell column"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("主体证件照片")])),_:1}),h(c,{class:"main-info-cell-body mt20 flex justify-center"},{default:I((()=>[h(m,{class:"cert-img",mode:"scaleToFill",src:i.config().baseUrl+"/sofn-sys-web/sysTemplate/downPic?fileUrl="+t.mainInfo.legalImages},null,8,["src"])])),_:1})])),_:1})])),_:1})):(_(),C(c,{key:1,class:"main-info-section-body"},{default:I((()=>[h(c,{class:"main-info-cell"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("主体名称")])),_:1}),h(c,{class:"main-info-cell-body"},{default:I((()=>[h(c,{class:"main-info-cell-view"},{default:I((()=>[h(L,{type:"text",modelValue:t.mainInfo.enterpriseName,"onUpdate:modelValue":a[5]||(a[5]=e=>t.mainInfo.enterpriseName=e),placeholder:"请输入主体名称","placeholder-style":"color:#999;"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(c,{class:"main-info-cell"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("社会统一信用代码")])),_:1}),h(c,{class:"main-info-cell-body"},{default:I((()=>[h(c,{class:"main-info-cell-view"},{default:I((()=>[h(L,{type:"text",modelValue:t.mainInfo.creditCode,"onUpdate:modelValue":a[6]||(a[6]=e=>t.mainInfo.creditCode=e),placeholder:"请输入社会统一信用代码","placeholder-style":"color:#999;"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(c,{class:"main-info-cell"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("法定代表人")])),_:1}),h(c,{class:"main-info-cell-body"},{default:I((()=>[h(c,{class:"main-info-cell-view"},{default:I((()=>[h(L,{type:"text",modelValue:t.mainInfo.contactName,"onUpdate:modelValue":a[7]||(a[7]=e=>t.mainInfo.contactName=e),placeholder:"请输入法定代表人","placeholder-style":"color:#999;"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(c,{class:"main-info-cell"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("详细地址")])),_:1}),h(c,{class:"main-info-cell-body"},{default:I((()=>[h(c,{class:"main-info-cell-view"},{default:I((()=>[h(L,{type:"text",modelValue:t.mainInfo.address,"onUpdate:modelValue":a[8]||(a[8]=e=>t.mainInfo.address=e),placeholder:"请输入详细地址","placeholder-style":"color:#999;"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(c,{class:"main-info-cell"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("法人身份证号码")])),_:1}),h(c,{class:"main-info-cell-body"},{default:I((()=>[h(c,{class:"main-info-cell-view"},{default:I((()=>[h(L,{type:"text",modelValue:t.mainInfo.idcode,"onUpdate:modelValue":a[9]||(a[9]=e=>t.mainInfo.idcode=e),placeholder:"请输入法人身份证号码","placeholder-style":"color:#999;"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(c,{class:"main-info-cell column"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("主体证件照片")])),_:1}),h(c,{class:"main-info-cell-body mt20 flex justify-center"},{default:I((()=>[h(m,{class:"cert-img",mode:"aspectFit",src:i.config().baseUrl+"/sofn-sys-web/sysTemplate/downPic?fileUrl="+t.mainInfo.businessLicenceimg},null,8,["src"])])),_:1})])),_:1})])),_:1})),h(c,{class:"main-info-section-title mt12"},{default:I((()=>[w("所属区域")])),_:1}),h(c,{class:"main-info-section-body"},{default:I((()=>[h(c,{class:"main-info-cell"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("所属区域")])),_:1}),h(c,{class:"main-info-cell-body"},{default:I((()=>[h(c,{class:"main-info-cell-view"},{default:I((()=>[t.areaText?(_(),C(P,{key:0,defaultValue:t.areaText,placeholder:"请选择"},null,8,["defaultValue"])):N("",!0)])),_:1})])),_:1})])),_:1}),h(c,{class:"main-info-cell pb24"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("经纬度")])),_:1}),h(c,{class:"main-info-cell-body"},{default:I((()=>[h(c,{class:"main-info-cell-view no-align"},{default:I((()=>[h(R,{ref:"myLocationRef"},null,512)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))])),_:1}),h(c,{class:"main-info-section pt0"},{default:I((()=>[h(c,{class:"main-info-section-title mb10 flex items-center justify-between",onClick:a[10]||(a[10]=e=>t.collapse2=!t.collapse2)},{default:I((()=>[h(c,null,{default:I((()=>[w("非核心信息变更 "),h(s,{class:"ft14"},{default:I((()=>[w("(变更即时生效)")])),_:1})])),_:1}),h(d,{name:"down",size:"20rpx",color:"#666"})])),_:1}),t.collapse2?N("",!0):(_(),C(c,{key:0,class:"main-info-section-body"},{default:I((()=>[h(c,{class:"main-info-cell column"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("主体类型")])),_:1}),h(c,{class:"main-info-cell-body mt12 flex justify-between"},{default:I((()=>[(_(!0),p(y,null,U(i.config().mainKindCodes,((e,a)=>(_(),C(c,{class:B(["main-info-checkbox",e.code===t.mainInfo.entityType?"checked":""])},{default:I((()=>[w(T(e.name),1)])),_:2},1032,["class"])))),256))])),_:1})])),_:1}),h(c,{class:"main-info-cell column"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("主体属性")])),_:1}),h(c,{class:"main-info-cell-body mt12 flex justify-between"},{default:I((()=>[(_(!0),p(y,null,U(i.config().attributeCodes,((e,a)=>(_(),C(c,{class:B(["main-info-checkbox",t.mainInfo.entityProperty.indexOf(e.code)>-1?"checked":""])},{default:I((()=>[w(T(e.name),1)])),_:2},1032,["class"])))),256))])),_:1})])),_:1}),h(c,{class:"main-info-cell column"},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("所属行业")])),_:1}),h(c,{class:"main-info-cell-body mt12 flex justify-between"},{default:I((()=>[(_(!0),p(y,null,U(i.config().industryCodes,((e,a)=>(_(),C(c,{class:B(["main-info-checkbox",t.mainInfo.entityIndustry.indexOf(e.code)>-1?"checked":""])},{default:I((()=>[w(T(e.name),1)])),_:2},1032,["class"])))),256))])),_:1})])),_:1})])),_:1}))])),_:1}),h(c,{class:"main-info-section"},{default:I((()=>[h(c,{class:"main-info-cell column pt4",style:{"border-top":"1px solid #ccc"}},{default:I((()=>[h(c,{class:"main-info-cell-label"},{default:I((()=>[w("变更原因")])),_:1}),h(c,{class:"main-info-cell-body mt12"},{default:I((()=>[h(G,{placeholder:"变更原因(300字以内)"})])),_:1})])),_:1})])),_:1}),V("div",{class:"main-info-footer"},[h(E,{class:"main-info-footer-btn",text:"确定",onClick:i.actionSubmit},null,8,["onClick"])])])),_:1})],64)}],["__scopeId","data-v-326cc6b7"]]);export{L as default};
