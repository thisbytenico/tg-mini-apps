import{d as e,a as t,_ as s,m as o,b as i,c as a,o as n,e as r,f as c,s as l,g as d,h as u,w as h,i as b,n as p,j as g,k as m,F as y,r as w,l as f,t as A,p as k,q as C,u as S,v as x,x as D,y as R,z as v,A as U,B as T,C as z,D as E,E as L,G as N,H as I,I as j,J as B,K as F}from"./index-CBLTQg_b.js";import{C as Y}from"./index.f8_EbUbE.js";const _=s({name:"u-subsection",mixins:[o,i,e({props:{list:{type:Array,default:()=>t.subsection.list},current:{type:[String,Number],default:()=>t.subsection.current},activeColor:{type:String,default:()=>t.subsection.activeColor},inactiveColor:{type:String,default:()=>t.subsection.inactiveColor},mode:{type:String,default:()=>t.subsection.mode},fontSize:{type:[String,Number],default:()=>t.subsection.fontSize},bold:{type:Boolean,default:()=>t.subsection.bold},bgColor:{type:String,default:()=>t.subsection.bgColor},keyName:{type:String,default:()=>t.subsection.keyName}}})],data:()=>({itemRect:{width:0,height:0},innerCurrent:"",windowResizeCallback:{}}),watch:{list(e,t){this.init()},current:{immediate:!0,handler(e){e!==this.innerCurrent&&(this.innerCurrent=e)}}},computed:{wrapperStyle(){const e={};return"button"===this.mode&&(e.backgroundColor=this.bgColor),e},barStyle(){const e={};return e.width=`${this.itemRect.width}px`,e.height=`${this.itemRect.height}px`,e.transform=`translateX(${this.innerCurrent*this.itemRect.width}px)`,"subsection"===this.mode&&(e.backgroundColor=this.activeColor),e},itemStyle(e){return e=>{const t={};return"subsection"===this.mode&&(t.borderColor=this.activeColor,t.borderWidth="1px",t.borderStyle="solid"),t}},textStyle(e){return e=>{const t={};return t.fontWeight=this.bold&&this.innerCurrent===e?"bold":"normal",t.fontSize=a(this.fontSize),"subsection"===this.mode?t.color=this.innerCurrent===e?"#fff":this.inactiveColor:t.color=this.innerCurrent===e?this.activeColor:this.inactiveColor,t}}},mounted(){this.init(),this.windowResizeCallback=e=>{this.init()},n(this.windowResizeCallback)},beforeUnmount(){r(this.windowResizeCallback)},emits:["change"],methods:{addStyle:c,init(){this.innerCurrent=this.current,l().then((()=>this.getRect()))},getText(e){return"object"==typeof e?e[this.keyName]:e},getRect(){this.$uGetRect(".u-subsection__item--0").then((e=>{this.itemRect=e}))},clickHandler(e){this.innerCurrent=e,this.$emit("change",e)}}},[["render",function(e,t,s,o,i,a){const n=k,r=C;return d(),u(n,{class:p(["u-subsection",[`u-subsection--${e.mode}`]]),ref:"u-subsection",style:g([a.addStyle(e.customStyle),a.wrapperStyle])},{default:h((()=>[b(n,{class:p(["u-subsection__bar cursor-pointer",["button"===e.mode&&"u-subsection--button__bar",0===i.innerCurrent&&"subsection"===e.mode&&"u-subsection__bar--first",i.innerCurrent>0&&i.innerCurrent<e.list.length-1&&"subsection"===e.mode&&"u-subsection__bar--center",i.innerCurrent===e.list.length-1&&"subsection"===e.mode&&"u-subsection__bar--last"]]),ref:"u-subsection__bar",style:g([a.barStyle])},null,8,["style","class"]),(d(!0),m(y,null,w(e.list,((t,s)=>(d(),u(n,{class:p(["u-subsection__item cursor-pointer",[`u-subsection__item--${s}`,s<e.list.length-1&&"u-subsection__item--no-border-right",0===s&&"u-subsection__item--first",s===e.list.length-1&&"u-subsection__item--last"]]),ref_for:!0,ref:`u-subsection__item--${s}`,style:g([a.itemStyle(s)]),onClick:e=>a.clickHandler(s),key:s},{default:h((()=>[b(r,{class:"u-subsection__item__text",style:g([a.textStyle(s)])},{default:h((()=>[f(A(a.getText(t)),1)])),_:2},1032,["style"])])),_:2},1032,["class","style","onClick"])))),128))])),_:1},8,["class","style"])}],["__scopeId","data-v-92bb2448"]]),V=""+new URL("bg-CG0QQo52.png",import.meta.url).href,W=""+new URL("logo-DFWN0wu4.png",import.meta.url).href,K=""+new URL("3-BT7tCsNI.png",import.meta.url).href,G=""+new URL("4-BYvVPypY.png",import.meta.url).href;const H=s({name:"",components:{},data:()=>({windowHeight:"",type:"password",isAgree:!1,mobile:"",code:"",username:"",password:"",timer:null,codeTimer:59,uuid:"",curNow:1,tabs:[{name:"政务办公"},{name:"企业主体"}]}),onLoad(){const e=S().windowHeight;this.windowHeight=e,this.$cookies.get("username")&&(this.username=this.$cookies.get("username"),this.password=this.$cookies.get("password")),this.$cookies.get("authType")&&(this.curNow=this.$cookies.get("authType")),this.getPublicKey()},watch:{},computed:{getStyle(){if(this.windowHeight)return{height:`${this.windowHeight}px`}}},methods:{sectionChange(e){this.curNow=e,0==e&&(this.type="password"),this.getPublicKey()},config:()=>x,actionLogin(){switch(this.type){case"mobile":this.actionLoginMobile();break;case"password":this.actionLoginPassword()}},actionLoginMobile(){return this.mobile?11===this.mobile.length?this.code?void R.post("sofn-tts-web-branch/ttsLogin/loginPhone",{code:this.code,phone:this.mobile},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},toast:!1}).then((async e=>{switch(e.httpCode){case 207:z("频繁操作");break;case 304:z("多次登录失败，账户已被锁定，5分钟后再试！");break;case 303:z("登录失败，账户或密码错误");break;case 404:z("连接失败：404");break;case 406:z("账号没有注册，请注册进行注册或者绑定!");break;case 408:z("请求超时");break;case 409:z("发生冲突");break;case 410:z("已被删除");break;case 423:z("已被锁定");break;case 200:v("token",decryptText),v("userInfo",e.data),U("dictData")?x.setDictData(U("dictData")):await R.post("/sofn-tts-web-branch/ttsScltxxcjAgriProduction/getZsAllDictData",{},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:U("token")},toast:!1}).then((e=>{200==e.httpCode&&(x.setDictData(e.data),v("dictData",e.data))})),T({url:"/pages/index/index"})}})):D({title:"验证码不能为空!",icon:"none"}):void 0:D({title:"电话号码不能为空",icon:"none"})},actionLoginPassword(){if(!this.username)return D({title:"用户名不能为空!",icon:"none"});if(!this.password)return D({title:"密码不能为空!",icon:"none"});let e={account:this.username,password:this.password};console.log(e);var t=this.getUUid()().replace(/-/g,""),s=this.encodeDES(e,t),o=U("publicKey"),i=this.encodeRSA(t,o);0==this.curNow?this.zwbgFun(s,i,t):this.zsFun(s,i,t)},zwbgFun(e,t,s){E({url:x.zwbgUrl+"/sofn-sys-web/login",method:"POST",data:{ciphertext:e,desKey:t},header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},success:e=>{var t=e.data;switch(t.httpCode){case 207:z("频繁操作");break;case 304:z("多次登录失败，账户已被锁定，5分钟后再试！");break;case 303:z("登录失败，账户或密码错误");break;case 404:z("连接失败：404");break;case 408:z("请求超时");break;case 409:z("发生冲突");break;case 410:z("已被删除");break;case 423:z("已被锁定");break;case 200:var o=this.decryptDES(t.token,s);v("token",o);var i=new Date,a=new Date(i.getFullYear(),i.getMonth(),i.getDate()+15);this.$cookies.set("account",this.account,{expires:a}),this.$cookies.set("password",this.password,{expires:a}),this.$cookies.set("authType",this.curNow,{expires:a});let e=new Map([["ALES","http://202.127.45.194:9092/zf/#/"],["ADS","http://202.127.45.194:9092/jc/#/"],["ASMS","http://202.127.45.194:9092/jg/#/"]]);window.location.href=e.get(t.user.orgType)+"?token="+o}},fail:e=>{},complete:()=>{}})},zsFun(e,t,s){R.post("/sofn-tts-web-branch/ttsLogin/login",{ciphertext:e,desKey:t},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},toast:!1}).then((async e=>{var t=e;switch(t.httpCode){case 207:z("频繁操作");break;case 304:z("多次登录失败，账户已被锁定，5分钟后再试！");break;case 303:z("登录失败，账户或密码错误");break;case 404:z("连接失败：404");break;case 405:z("PASSWORD ERROR");break;case 408:z("请求超时");break;case 409:z("发生冲突");break;case 410:z("已被删除");break;case 423:z("已被锁定");break;case 200:var o=this.decryptDES(t.token,s);console.log("decryptText",o),v("token",o),v("userInfo",t.data);var i=new Date,a=new Date(i.getFullYear(),i.getMonth(),i.getDate()+15);this.$cookies.set("username",this.username,{expires:a}),this.$cookies.set("password",this.password,{expires:a}),this.$cookies.set("authType",this.curNow,{expires:a}),console.log(1111111),U("dictData")?x.setDictData(U("dictData")):await R.post("/sofn-tts-web-branch/ttsScltxxcjAgriProduction/getZsAllDictData",{},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:U("token")},toast:!1}).then((e=>{200==e.httpCode&&(x.setDictData(e.data),v("dictData",e.data))})),T({url:"/pages/index/index"})}})).catch((()=>{}))},actionSendCode(){return this.mobile?11!==this.mobile.length?D({title:"电话号码格式不正确",icon:"none"}):void(this.timer||R.post("sofn-tts-web-branch/ttsLogin/getPhoneCode",{phone:this.mobile},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then((e=>{200===e.httpCode?(z("验证码已发送，请注意查收"),this.timer=setInterval((()=>{this.codeTimer--,0===this.codeTimer&&(clearInterval(this.timer),this.timer=null,this.codeTimer=59)}),1e3)):z(e.msg)}))):D({title:"电话号码不能为空",icon:"none"})},actionView(e){L({url:`/pages/view/index?src=${encodeURIComponent(e)}`})},doSomething(){},encodeDES(e,t){var s=JSON.stringify(e),o=Y.enc.Utf8.parse(t);return Y.DES.encrypt(s,o,{mode:Y.mode.ECB,padding:Y.pad.Pkcs7}).toString()},encodeRSA(e,t){var s=t.modulus,o=t.exponent,i=RSAUtils.getKeyPair(o,"",s);return RSAUtils.encryptedString(i,e)},decryptDES(e,t){console.log("data",e);var s=Y.enc.Utf8.parse(t);console.log(1111);var o=Y.DES.decrypt({ciphertext:Y.enc.Base64.parse(e)},s,{mode:Y.mode.ECB,padding:Y.pad.Pkcs7});console.log(2222);var i=o.toString(Y.enc.Utf8);return console.log("result",i),i},getPublicKey(){let e="";e=0==this.curNow?x.zwbgUrl+"/sofn-sys-web/getPublicKey":`${x.baseUrl}/sofn-tts-web-branch/ttsLogin/getPublicKey`,R.post(e,{},{header:{dataType:"json"}}).then((e=>{v("publicKey",e.publicKey)}))},getUUid(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(t,s){var o,i,a=e,n=[];if(s=s||a.length,t)for(o=0;o<t;o++)n[o]=a[0|Math.random()*s];else for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",o=0;o<36;o++)n[o]||(i=0|16*Math.random(),n[o]=a[19==o?3&i|8:i]);return n.join("")}}}},[["render",function(e,t,s,o,i,a){const n=B,r=k,c=F,l=N(I("u-subsection"),_);return d(),u(r,{class:"login",style:g(a.getStyle)},{default:h((()=>[b(n,{mode:"widthFix",class:"login-bg",src:V}),b(r,{class:"login-body"},{default:h((()=>[b(n,{mode:"widthFix",class:"login-body-logo",src:W}),b(r,{class:"login-body-title"},{default:h((()=>[f("国家农产品质量安全追溯管理信息平台")])),_:1}),b(r,{class:"login-body-tabs"},{default:h((()=>[1==i.curNow?(d(),u(r,{key:0,class:p(["login-body-tabs-item",{checked:"mobile"===i.type}]),onClick:t[0]||(t[0]=e=>i.type="mobile")},{default:h((()=>[f(" 短信登录 ")])),_:1},8,["class"])):j("",!0),b(r,{class:p(["login-body-tabs-item",{checked:"password"===i.type}]),onClick:t[1]||(t[1]=e=>i.type="password")},{default:h((()=>[f(" 账号密码 ")])),_:1},8,["class"])])),_:1}),"mobile"===i.type&&1==i.curNow?(d(),m(y,{key:0},[b(r,{class:"login-body-input"},{default:h((()=>[i.mobile&&11!==i.mobile.length?(d(),u(r,{key:0,class:"login-body-input-tips"},{default:h((()=>[f("请输入11位手机号码")])),_:1})):j("",!0),b(n,{class:"login-body-input-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA1CAYAAAAHz2g0AAACRUlEQVRo3u2asWsUQRTGvzd32SicNjYaQbg6YBO11UPZwHbXnJDigvkHYpnKkFSXzr9A2RXBW4sQhE0Ew2FjEbARYptGLiIIQa8wF3c+Cxc5T2/dld1zT+Z1N7vLfL9535sbhgdMeMioB0EQTH/sqRqJWYJn/o04+SyC/XMV3XEc5zgxgOcH10l5SLJaiFUWORDhnWbDeTn8TA0PuO1giZROUcQDAMkqKR23HSzFZsDzn1dJ/YZkpZB+F+mJqMvNxvzBbzNA6tWiio8yUSH1aoyFeGsCNp6bcTVwvvj6eWEkAIlS4eUPaSynLKI9CO6exqXXjcZsP0thvr9vHcu7K6HW90FeTfpdCgDpnrVOzdfrtaM8VjZakFebmx37U//LW/Jnq4wKlXQCBdnKS/xg1Ou1IxLPkutK6j3hh/Ht9zjMHKCoYQAMgAEwAAbAABgAA2AADIABMAAGwAAYgD/dFADWuEQJkt8QJr9WIebGBUDiWvYAoO35Owt5i/f8nQWCdtL3U92Naq0fu0+2F0WwRyDM2DYWiTmttZ3mu3Lq9II2CTtz25hdyAD8RwAi6ItgpTSlZkpTakYEKyLo5zFXOaeFubd429kY+L3htgMAaE1EBlRZeUnGTA0MA4hk8+ekv+pmkrG/rK8wrgbeA7iYwTzrbjv4YZtI/HpGW8RhjIXkRUaHMYtEKzzR3fBEd0m0yMxOs7sxFlJrItIrqt+jZo+1kQDfu0C4LCIsoHgCXB7sVIkOgb/Go6fbN7TGg0loeJr4lrNvYGLm9AVgcx8AAAAASUVORK5CYII="}),b(c,{class:"login-body-input-body",modelValue:i.mobile,"onUpdate:modelValue":t[2]||(t[2]=e=>i.mobile=e),placeholder:"手机号"},null,8,["modelValue"])])),_:1}),b(r,{class:"login-body-input"},{default:h((()=>[b(n,{class:"login-body-input-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA1CAYAAAAHz2g0AAAFIUlEQVRo3u1ZXWyTVRh+3tNvdaATA2zgjRpBokhiTCYXKv4QXNtFnPy1Y4wWjYmLjBCJ+JOAJErEBKIXgkJMcOvYsn3sJ7qla1lJSUS5ULkyijeGaEDHFLORbKPtdx4vNso2yli7dqtm703b0++853nO+57353zAjIwvfjPwdDb1q2wqr23q3KM1TtU0de7K1hqSDaVtbZG7eqODB0Fuur6S1Ofdfse2Tc+v+CdnCUQiEeP3nkGfJveCWJjkkW6B7Hl4ceHR4uLiWM4QaGiPzI/2D24WYivBRRNY9rwofCqGqvWudVyaFgL1zScesCxdokGHgA4S9jSWj4mgS4CQYVMnKtY7zk2KwLGmE0/EhYOidAygjZatwCYssMg7FVAIyoMafEgES0kWZf5ESo+APxP4SUSdI3lJlLpCjT6xWVcAsahVnkHJr/SUfAMAxsj5ccZPgwD1tRELFoe+DQ0N/SCzFFLIQgKFAJ7iMAha1tBn/Nr6FuIjNj+rYXQqZIbADIEZAjMEZgj8PwiISBwih0Qk/J8jICJfKcGyLR5XNe2sEpH4ROca04y9W9nkNe8GVysA1JnBxdZVHSJo5D4BkUbJy6v2rl31NwD4G0PLLG2FASxIRY0x9bgxAKDa53EdTbSezYFHaekuEPNS1WdMsa//IlTrveWOHxNNf2NoGS3dRXJeOjqNKQQfsBVwY2Wpoy+x863hJToaDaez81NKQCD7vW7n2yKS6DT8raEiHY12purzGQqjct6ALBeRAyLCcfzdEkiVr9z15kjw7e3fz9Yx3QHg/mlIZHJS7HnFleWu73we104BXAC6kx5WZXvRV+46Mrrpolzu7zkG8rEpz8QiEheF3b7h0AcAXo8rZJ9lf0REQiMe7BWREt8GR8dYHXXHg2+RXDMtpQRJg2S4xux8YeR4Rdmqbq/b6YJgJwR/2igrvW7X6bHz/WZoJcm901sLEbOFbPU3BbeOsQ63eEoPFBXgvs3lzrNjp5lmZKGmbiRhm/ZijoRNUx+sbercT3LU1UxpaenVZHMG9OBhkIXZrUYF/Sm61Bt+M9gYCARuG+85vxmsIFiWwbjcfzML9KVuDbp7rkjYNINzk/3f8GV4gSY/yfDG992EgFxIz6X45IDWZ+pbwjfE9dhg/AOQczOcGi8kJSDg2XRVElgSj8fO1JrB5dfGjpmBpYD2ZT6zX8c52gKUHyajmGQRqSO1x4NlABCnfJjpqDMW52gL2FVbKt3QzcIsLd1a0xT4DOTqbLSeYldtSQl41zouEezISHQjqrJRGBLsGPlOQd3oX+pQLt9CjMV3AwGfxxkWkeacBC/S7PM4w7fMxPZ823aB9OXWzkufPd+2fUKlxMaykouEbMspAkqqN5aVXJxwLbSl3OlXIvtyAbwS2ed1O+uSW+YW4m/q/EiTr08j+I+9HteOtKtRr8e1QynsGq91zNKBpVLYNR74CVkgcYNgdq4h8QXIOVOAvlcEL/ncrrZbH+4UpL7l5L2xWLQO4Iosov9aKaPS637ut4lFp9TrHVV7PPgKiH0ZrTJFLkPwjm+D8/NU3DXtN/UN7ZH5sf7BdwG+mt5b+sTtRRSQI3mz89+rWP3sX6nnh0mK3+y6h4zvBuhNhcgwcL+I8f5E3SUrBBLXJS3Bu3VcVxNSNa5riVwW8LAy1MHN65x/TD5DZ1hM89tZA+xdB+BlAM+QlGGfPgXg6CyZ0+J2Pz6QuRIji1LTFliEGErybPbQpnWrfs3GGv8CeBsYni1YWvAAAAAASUVORK5CYII="}),b(c,{class:"login-body-input-body",modelValue:i.code,"onUpdate:modelValue":t[3]||(t[3]=e=>i.code=e),placeholder:"验证码"},null,8,["modelValue"]),b(r,{class:"login-body-input-extra",onClick:a.actionSendCode},{default:h((()=>[f(A(i.timer?`${i.codeTimer}秒`:"获取验证码"),1)])),_:1},8,["onClick"])])),_:1})],64)):j("",!0),"password"===i.type?(d(),m(y,{key:1},[b(r,{class:"login-body-input"},{default:h((()=>[b(n,{class:"login-body-input-icon",src:K}),b(c,{class:"login-body-input-body",modelValue:i.username,"onUpdate:modelValue":t[4]||(t[4]=e=>i.username=e),placeholder:"用户名"},null,8,["modelValue"])])),_:1}),b(r,{class:"login-body-input"},{default:h((()=>[b(n,{class:"login-body-input-icon",src:G}),b(c,{class:"login-body-input-body",type:"password",modelValue:i.password,"onUpdate:modelValue":t[5]||(t[5]=e=>i.password=e),placeholder:"密码"},null,8,["modelValue"])])),_:1})],64)):j("",!0),b(r,{class:"login-body-btn",onClick:a.actionLogin},{default:h((()=>[f("登录")])),_:1},8,["onClick"]),b(r,{style:{"margin-top":"30rpx"}},{default:h((()=>[b(l,{activeColor:"#2faf68",onChange:a.sectionChange,keyName:"name",list:i.tabs,current:i.curNow},null,8,["onChange","list","current"])])),_:1}),b(r,{class:"login-body-protocol"},{default:h((()=>[b(r,{class:"mt12"},{default:h((()=>[f("版权所有:©农业农村部农产品质量中心，中农曙光(北京)科技有限公司")])),_:1})])),_:1})])),_:1})])),_:1},8,["style"])}],["__scopeId","data-v-7cf1fe9f"]]);export{H as default};
