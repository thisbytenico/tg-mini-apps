import{_ as t,C as e,y as s,A as o,x as a,X as l,W as i,V as n,G as p,H as r,L as d,h as u,w as m,Y as f,p as c,g as h,i as y,l as b,K as T}from"./index-BdsNz36l.js";import{_ as x}from"./dw-card.CsilklMs.js";import{_ as U}from"./u-button.Di26Z4V2.js";import"./u-loading-icon.BXA7DYQS.js";const _=t({name:"",components:{},data:()=>({isDefault:!0,pageTitle:"",fileList:[],form:{brand:"",inputsName:"",inputsType:"",photoUrl:""}}),onLoad(t){const{type:e,info:s}=t;try{if(s){let t=JSON.parse(decodeURIComponent(s));this.form.brand=t.BRAND,this.form.id=t.ID,this.form.inputsName=t.INPUTS_NAME,this.form.photoUrl=t.PHOTO_URL,this.form.inputsType=t.INPUTS_TYPE,this.$nextTick((()=>{this.form.photoUrl&&(this.$refs.myFileUploadRef.fileList=this.form.photoUrl.split(",").map((t=>({resourceUrl:t}))))}))}}catch(o){}this.type=e,this.initPage()},watch:{},computed:{},methods:{actionSubmit(){this.form.photoUrl=this.$refs.myFileUploadRef.fileList.map((t=>t.resourceUrl)).join(","),console.log(this.form),this.$refs.inputsTypeRef.modelValue?this.form.inputsName?(this.form.inputsType=this.$refs.inputsTypeRef.modelValue,"add"==this.type?s.post("sofn-tts-web-branch/ttsScltxxcjInputs/addTtsScltxxcjInputs?id="+o("userInfo").id,{...this.form},{header:{token:o("token")},toast:!1}).then((t=>{200==t.httpCode?(a({icon:"none",title:"新增投入品成功"}),setTimeout((()=>{l(),i("refresh-inputs-list",{})}),1e3)):e(t.msg)})):s.post("sofn-tts-web-branch/ttsScltxxcjInputs/updateTtsScltxxcjInputs?id="+o("userInfo").id,{...this.form},{header:{token:o("token")},toast:!1}).then((t=>{200==t.httpCode?(a({icon:"none",title:"修改投入品成功"}),setTimeout((()=>{l(),i("refresh-inputs-list",{})}),1e3)):e(t.msg)}))):e("请输入投入品名称"):e("请选择投入品类型")},actionDelete(t){this.fileList.splice(t.index,1),a({icon:"none",title:"删除图片"})},afterRead(){},initPage(){switch(this.type){case"add":this.pageTitle="新增投入品";break;case"edit":this.pageTitle="编辑投入品"}n({title:this.pageTitle})},ajaxXxx(){}}},[["render",function(t,e,s,o,a,l){const i=p(r("u-navbar"),f),n=T,_=d("myInputBox"),g=d("myFormItem"),I=d("myCheckbox"),V=d("myFileUpload"),k=p(r("dw-card"),x),j=p(r("u-button"),U),N=c;return h(),u(N,{class:"inputs-edit"},{default:m((()=>[y(i,{title:a.pageTitle,autoBack:!0,placeholder:"",border:""},null,8,["title"]),y(N,{class:"inputs-edit-body"},{default:m((()=>[y(g,{label:"投入品名称和厂家",col:"2"},{default:m((()=>[y(_,null,{default:m((()=>[y(n,{modelValue:a.form.inputsName,"onUpdate:modelValue":e[0]||(e[0]=t=>a.form.inputsName=t),type:"text",placeholder:"输入名称"},null,8,["modelValue"])])),_:1}),y(_,null,{default:m((()=>[y(n,{modelValue:a.form.brand,"onUpdate:modelValue":e[1]||(e[1]=t=>a.form.brand=t),type:"text",placeholder:"输入厂家"},null,8,["modelValue"])])),_:1})])),_:1}),y(g,{label:"投入品类型"},{default:m((()=>[y(I,{modelValue:a.form.inputsType,"onUpdate:modelValue":e[2]||(e[2]=t=>a.form.inputsType=t),ref:"inputsTypeRef",options:["兽药","鱼药","肥料","饲料","饵料","农药","其他"]},null,8,["modelValue"])])),_:1}),y(g,{label:"投入品图片"},{default:m((()=>[y(k,null,{default:m((()=>[y(V,{ref:"myFileUploadRef"},null,512)])),_:1})])),_:1}),y(N,{class:"mt12 pl12 pr12"},{default:m((()=>[y(j,{style:{background:"#00B568",color:"#FFF"},onClick:l.actionSubmit},{default:m((()=>[b("保存")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-bfe7f60f"]]);export{_ as default};
