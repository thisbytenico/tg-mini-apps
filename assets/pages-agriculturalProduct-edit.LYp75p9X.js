import{_ as t,$ as e,v as a,C as s,y as l,A as o,X as i,W as d,E as r,V as n,G as u,H as c,h as m,w as f,p as h,Y as p,O as y,g,i as _,l as C,t as w,a3 as x,q as b,K as k}from"./index-BUnLS0SE.js";const T=t({name:"",components:{},data:()=>({industryValue:-1,pickerValue:0,type:"",pageTitle:"",productName:"",form:{industry:"",name:"",productCode:"",type:"",typeName:"",status:"Y",slaughterStatus:""},statusList:["启用","停用"]}),onLoad(t){const{type:a,info:s}=t;try{if(s){let t=JSON.parse(decodeURIComponent(s));this.form.productCode=t.PRODUCT_CODE,this.form.name=t.NAME,this.form.industry=t.INDUSTRY,this.form.typeName=t.TYPE_NAME,this.form.id=t.ID,this.form.type=t.TYPE,this.form.delFlag=t.DEL_FLAG,this.form.status=t.STATUS,this.industryValue=this.config().industryCodes.findIndex((e=>e.num===t.INDUSTRY)),console.log(t.INDUSTRY),"Y"==this.form.status?this.pickerValue=0:this.pickerValue=1}}catch(l){}this.type=a,this.initPage(),e("selectProduct",(t=>{console.log(t),this.form.name=t.name,this.form.productCode=t.productCode,this.form.typeName=t.parentName,this.form.slaughterStatus=t.slaughterStatus,this.form.type=t.gbCode}))},watch:{},computed:{},methods:{config:()=>a,industryChange(t){this.industryValue=t.detail.value;let e=this.config().industryCodes[t.detail.value].num;this.form.industry?this.form.industry!==e&&(this.form.typeName="",this.form.name="",this.form.industry=e):this.form.industry=e},pickerChange(t){this.pickerValue=t.detail.value,0===t.detail.value?this.form.status="Y":this.form.status="N"},actionSubmit(){if(!this.form.industry)return void s("请先选择行业");if(!this.form.name)return void s("请先选择产品");const t={...this.form};"add"===this.type?l.post("/sofn-tts-web-branch/ttsScltxxcjProduct/addTtsScltxxcjProduct?id="+o("userInfo").id,{...t},{header:{token:o("token")},toast:!1}).then((t=>{200===t.httpCode?(i(),d("refreshProductList")):s(t.msg)})):l.post("sofn-tts-web-branch/ttsScltxxcjProduct/updateTtsScltxxcjProduct?entityIdCode="+o("userInfo").id,{...t},{header:{token:o("token")},toast:!1}).then((t=>{200===t.httpCode?(i(),d("refreshProductList")):s(t.msg)}))},actionToProductList(){this.form.industry?r({url:"/pages/agriculturalProduct/productList?hideSubTitle=1&industry="+this.form.industry}):s("请先选择行业")},initPage(){switch(this.type){case"add":this.pageTitle="新增农产品";break;case"edit":this.pageTitle="编辑农产品",this.productName="黑小麦"}n({title:this.pageTitle})},ajaxXxx(){}}},[["render",function(t,e,a,s,l,o){const i=h,d=u(c("u-navbar"),p),r=u(c("dw-icon"),y),n=x,T=b,v=k;return g(),m(i,{class:"agr-edit"},{default:f((()=>[_(d,{title:l.pageTitle,autoBack:!0,placeholder:"",border:""},{right:f((()=>[_(i,{class:"u-nav-slot",onClick:o.actionSubmit},{default:f((()=>[C("确定")])),_:1},8,["onClick"])])),_:1},8,["title"]),_(i,null,{default:f((()=>[_(i,{class:"dw-cell formitem"},{default:f((()=>[_(i,{class:"dw-cell-body"},{default:f((()=>[_(i,{class:"dw-cell-content formitem-label"},{default:f((()=>[C("所属行业")])),_:1}),_(i,{class:"dw-cell-extra"},{default:f((()=>[_(n,{"range-key":"name",onChange:o.industryChange,value:l.industryValue,range:o.config().industryCodes},{default:f((()=>{var t;return[C(w((null==(t=o.config().industryCodes[l.industryValue])?void 0:t.name)||"请选择")+" ",1),_(r,{class:"ml4",name:"down-fill",size:"24rpx",color:"#666"})]})),_:1},8,["onChange","value","range"])])),_:1})])),_:1})])),_:1}),_(i,{class:"dw-cell formitem required"},{default:f((()=>[_(i,{class:"dw-cell-body"},{default:f((()=>[_(i,{class:"dw-cell-content formitem-label"},{default:f((()=>[C("产品名称")])),_:1}),_(i,{class:"dw-cell-extra",onClick:o.actionToProductList},{default:f((()=>[l.form.name?(g(),m(T,{key:0},{default:f((()=>[C(w(l.form.name),1)])),_:1})):(g(),m(T,{key:1,class:"text-level2"},{default:f((()=>[C("点击选择产品名称")])),_:1})),_(r,{class:"ml4",name:"right",size:"24rpx",color:"#666"})])),_:1},8,["onClick"])])),_:1})])),_:1}),_(i,{class:"dw-cell formitem"},{default:f((()=>[_(i,{class:"dw-cell-body"},{default:f((()=>[_(i,{class:"dw-cell-content formitem-label"},{default:f((()=>[C("种类")])),_:1}),_(i,{class:"dw-cell-extra"},{default:f((()=>[_(v,{disabled:"",type:"text",modelValue:l.form.typeName,"onUpdate:modelValue":e[0]||(e[0]=t=>l.form.typeName=t),style:{"text-align":"right"},placeholder:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),_(i,{class:"dw-cell formitem"},{default:f((()=>[_(i,{class:"dw-cell-body"},{default:f((()=>[_(i,{class:"dw-cell-content formitem-label"},{default:f((()=>[C("状态")])),_:1}),_(i,{class:"dw-cell-extra"},{default:f((()=>[_(n,{value:l.pickerValue,onChange:o.pickerChange,range:l.statusList},{default:f((()=>[C(w(l.statusList[l.pickerValue])+" ",1),_(r,{class:"ml4",name:"down-fill",size:"24rpx",color:"#666"})])),_:1},8,["value","onChange","range"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-4db5df77"]]);export{T as default};
