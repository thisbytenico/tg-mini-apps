import{_ as e,C as a,W as t,X as s,y as l,A as o,G as c,H as d,h as n,w as r,p as i,Y as u,ad as h,a4 as f,M as p,g as m,i as _,l as k,k as g,r as y,F as x,t as C,ai as w,K as S}from"./index-BUnLS0SE.js";import{_ as b}from"./u-search.BGGYXq0-.js";const T=e({name:"",components:{},data:()=>({dataList:[],keyword:""}),onLoad(e){},watch:{},computed:{},methods:{submit(){let e=this.dataList.filter((e=>e.checked));for(const t of e){if(!t.saleAmount)return void a("选择记录中有未填写销售量");if(t.saleAmount>t.STORE_COUNT)return void a("选择记录中有超出库存")}0==e.length?a("请选择产品"):(t("productSelect",e),s())},itemChange(e){e.checked=!e.checked},actionSearch(){this.$refs.paging.reload()},actionSelectAll(){this.dataList.forEach((e=>{e.checked=!0}))},doSomething(){},ajaxXxx(){},queryList(e,a){let t=30*e;l.post("sofn-tts-web-branch/ttsScltxxcjScgl/getSaleList",{start:t,length:30,entity_id:o("userInfo").id,productName:this.keyword},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:o("token")},toast:!1}).then((e=>{e.data.list.forEach((e=>{e.checked=!1})),this.$refs.paging.complete(e.data.list)}))}}},[["render",function(e,a,t,s,l,o){const T=i,V=c(d("u-navbar"),u),A=c(d("u-search"),b),U=c(d("u-checkbox"),h),L=S,v=c(d("dw-cell"),f),R=c(d("z-paging"),p);return m(),n(T,{class:"sales"},{default:r((()=>[_(V,{title:"产品选择",onRightClick:o.actionSelectAll,autoBack:!0,placeholder:"",border:""},{right:r((()=>[_(T,{class:"u-nav-slot"},{default:r((()=>[k(" 全选 ")])),_:1})])),_:1},8,["onRightClick"]),_(A,{class:"sales-search",shape:"square",placeholder:"请输入关键字",modelValue:l.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>l.keyword=e),showAction:!1,onSearch:o.actionSearch,onCustom:o.actionSearch},null,8,["modelValue","onSearch","onCustom"]),_(T,{class:"sales-body"},{default:r((()=>[_(R,{"default-page-no":"0",fixed:!1,ref:"paging",modelValue:l.dataList,"onUpdate:modelValue":a[2]||(a[2]=e=>l.dataList=e),onQuery:o.queryList},{default:r((()=>[(m(!0),g(x,null,y(l.dataList,((e,t)=>(m(),n(v,{onClick:a=>o.itemChange(e),class:"border",key:t},{prefix:r((()=>[_(T,{style:{display:"flex","align-items":"center"}},{default:r((()=>[_(T,{style:{"pointer-events":"none"}},{default:r((()=>[_(U,{checked:e.checked,activeColor:"#00B568",shape:"circle"},null,8,["checked"])])),_:2},1024),_(T,{style:{width:"46vw"}},{default:r((()=>[_(T,{class:"sales-card-title"},{default:r((()=>[k(C(e.PRODUCT_NAME),1)])),_:2},1024),_(T,{class:"sales-card-code"},{default:r((()=>[k("产品追溯码:"+C(e.PRODUCT_PC),1)])),_:2},1024),_(T,{class:"sales-card-code"},{default:r((()=>[k("库　存:"+C(e.STORE_COUNT)+C(e.HARVEST_UNIT),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),default:r((()=>[_(T,{class:"",style:{display:"flex","align-items":"center","margin-left":"auto"},onClick:a[1]||(a[1]=w((()=>{}),["stop"]))},{default:r((()=>[_(T,{class:"",style:{color:"#666","font-size":"28rpx"}},{default:r((()=>[k("数量")])),_:1}),_(L,{modelValue:e.saleAmount,"onUpdate:modelValue":a=>e.saleAmount=a,type:"text",style:{"text-align":"center",border:"1px solid #eee",width:"100rpx",margin:"0 10rpx"}},null,8,["modelValue","onUpdate:modelValue"]),_(T,{style:{width:"2em","white-space":"break-spaces",color:"#666","font-size":"28rpx"}},{default:r((()=>[k(C(e.HARVEST_UNIT),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["modelValue","onQuery"])])),_:1}),_(T,{class:"sales-footer"},{default:r((()=>[_(T,{class:"sales-footer-btn primary",onClick:o.submit},{default:r((()=>[k(" 确定")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-a632b740"]]);export{T as default};
