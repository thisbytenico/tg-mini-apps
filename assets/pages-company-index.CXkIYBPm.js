import{_ as e,$ as s,Q as a,v as t,R as n,y as o,A as l,x as i,C as c,S as d,E as p,T as r,U as f,h as u,w as m,p as A,g as h,i as g,l as w,t as C,k as x,r as y,F as I,J as b}from"./index-BdsNz36l.js";import{_ as S}from"./nums.BUbf1Tpy.js";const E=e({name:"",components:{},data:()=>({info:{},companyMenus:[{title:"企业简介",desc:"",link:"/pages/company/edit?pageTitle=企业简介"},{title:"企业店铺",desc:"",link:"/pages/company/edit?pageTitle=企业店铺"},{title:"企业风采",desc:"",link:"/pages/company/image?q=1"}]}),created(){this.getInfo(),s("refreshCompanyInfo",(()=>{this.getInfo()}))},onUnload(){a("refreshCompanyInfo")},watch:{},computed:{config:()=>t},methods:{upload(){n({count:1,success:async e=>{let s=await this.uploadFilePromise(e.tempFilePaths[0]);o.post("sofn-tts-web-branch//ttsScltxxcjEmpInfo/updateEmpInfo",{id:this.info.id,headUrl:s},{header:{token:l("token")},toast:!1}).then((e=>{200==e.httpCode?(this.getInfo(),i({icon:"none",title:"修改成功"})):c(e.msg)}))}})},uploadFilePromise:e=>new Promise(((s,a)=>{d({url:t.baseUrl+"/sofn-tts-web-branch/ttsScltxxcjRegiter/upload?fileapi17268223914946",filePath:e,name:"file",formData:{},success:e=>{let a=JSON.parse(e.data);s(a.path)}})})),actionTo(e){if(!e)return i({icon:"none",title:"跳转链接为空"});p({url:e+"&info="+encodeURIComponent(JSON.stringify(this.info))})},doSomething(){},getInfo(){r({title:"加载中..."}),o.post("sofn-tts-web-branch/ttsScltxxcjEmpInfo/getEmpInfo",{id:l("userInfo").id},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:l("token")},toast:!1}).then((e=>{var s;200==e.httpCode?(this.info=e.data,this.companyMenus[0].desc=this.info.empProfile,this.companyMenus[1].desc=this.info.onlineStoreLink,this.companyMenus[2].desc=(null==(s=this.info.pictureUrl)?void 0:s.split(",").length)+"张"):c(e.msg)})).finally((()=>{f()}))}}},[["render",function(e,s,a,t,n,o){const l=b,i=A;return h(),u(i,{class:"company"},{default:m((()=>[g(i,{class:"company-section"},{default:m((()=>[g(i,{class:"dw-usercard"},{default:m((()=>[g(l,{onClick:o.upload,class:"dw-usercard-avatar",mode:"cover",src:o.config.baseUrl+"/sofn-sys-web/sysTemplate/downPic?fileUrl="+n.info.headUrl},null,8,["onClick","src"]),g(i,{class:"dw-usercard-body"},{default:m((()=>[g(i,{class:"dw-usercard-title"},{default:m((()=>[w(C(n.info.empName),1)])),_:1}),g(i,{class:"dw-usercard-desc"},{default:m((()=>[w(C(n.info.empScale),1)])),_:1})])),_:1})])),_:1}),g(i,{class:"company-info"},{default:m((()=>[g(i,{class:"company-info-title"},{default:m((()=>[w("行业："+C(n.info.empIndustry),1)])),_:1}),g(l,{class:"company-info-icon",src:S}),g(i,{class:"company-info-address"},{default:m((()=>[w(C(n.info.address),1)])),_:1})])),_:1})])),_:1}),g(i,null,{default:m((()=>[(h(!0),x(I,null,y(n.companyMenus,((e,s)=>(h(),u(i,{class:"dw-cell",onClick:s=>o.actionTo(e.link),key:s},{default:m((()=>[g(i,{class:"dw-cell-body"},{default:m((()=>[g(i,{class:"dw-cell-content"},{default:m((()=>[w(C(e.title),1)])),_:2},1024),g(i,{class:"dw-cell-extra text-desc ft14"},{default:m((()=>[w(C(e.desc)+" ",1),g(l,{class:"ml6",style:{width:"14rpx"},mode:"widthFix",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAkCAYAAABixKGjAAACeElEQVRIx7WWTWsTURSG33OamdSNxQ8KLpq0utOdICKCNEaICUpJP2KpJOhKxC6E/g23ghs/kjaaDrYiSJrQ1lYq/QUqCipVoWCEIlioSWbucSGUtJnOTMj07u49Z573nnPfuTPAPg5qnOSM+ZCI+SQQ0G9eH4p+axfOu8DLIhKp12vL+ZnFsC87bwD3NYTWNE3vb6cCmpwpHbPqsgpIr024LQE+ckBtELBuH5bedlrEiUSiSjonAVrzW4ABIDMYqzD4Kgh//BTYdktmNPaOQaNEsPwS4MZJ5lq8COKJvdNbEyC7xez03AMRueXwmCcXsd1iqLtzHKBFtwpyRrmvZXgkEjG7gp3DRPTJSUAp9SY/s3C8JTgAJJOR30x0BUQbDgI9pllb2qsCdiornbr8uYMxBFB9T7wgJGLZtojdTjw9El9mxm2nHBGERFlLz17M9bYEB4BMKv6QiO45CgDhWlV22JQ933CEl245AoT/u2g+5BluGKXDSuGpx01UA0GqeoKLCG0plQWkxwP7K0iPjg1c+gkAHW7ZJ06emxDIuIcdf9e0YH96JPrD8fXf/vQ9L59VploBRHNBryMoF24kE188uSX/auWQmNa0G5iIKnqAo7vBjnBzc/OxAGGXXnxgovNjw7GPduGAbTsKxbsKMuAK1jiSHoxVPF+5U4W5MxbJWxHobuCMA7jJLYYx31WDWhDB0XbBTW3ZUuYjgfT5Ad5xoFmjNC6QQb/A2z2fLJROWySrEAn6BQYAnioWDyqI4TcYAFjfRBDAX7/BAMCpVOIX6XyRQO/9BO/weW623C019Vogp/wAN//8z5a7pa7uk8Z32gXv+/gHJIE8fm3Er8YAAAAASUVORK5CYII="})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-ee7b00e4"]]);export{E as default};
