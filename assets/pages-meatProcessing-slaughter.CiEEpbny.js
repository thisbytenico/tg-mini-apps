import{_ as e,$ as t,y as a,A as l,v as s,E as o,x as i,X as r,W as c,G as n,H as u,L as d,h as p,w as m,p as g,Y as h,O as f,a4 as S,g as b,i as A,l as k,I as U,k as y,r as x,F as L,q as C,J as G,t as V,K as R}from"./index-Ci2ntzNm.js";import{_ as w}from"./dw-cell-group.Db-ry5CN.js";const E=e({name:"",components:{},data:()=>({unitsList:[],beforeSlaughterList:[],afterSlaughterList:[],beforeSlaughterListApiList:[]}),onLoad(e){this.ajaxGetUnitList(),t("productSelect",(e=>{this.beforeSlaughterList=e,a.post("sofn-tts-web-branch/ttsScltxxcjScgl/getSaleByProId",{proId:e.map((e=>e.ID)),entity_id:l("userInfo").id},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:l("token")},toast:!1}).then((t=>{t.forEach(((t,a)=>{t.slaughterAmount=e[a].number})),this.beforeSlaughterListApiList=t}))})),t("afterProductSelect",(e=>{e.forEach((e=>{e.harvestUnit="",e.slaughterAmount="",e.proofNumber=""})),this.afterSlaughterList=e}))},created(){},watch:{},computed:{},methods:{unitConfirm(e,t){e.harvestUnit=this.unitsList.find((e=>e.dictName===t)).id},config:()=>s,actionShowExample1(){this.beforeSlaughterList=[{},{}]},actionShowExample2(){this.afterSlaughterList=[{},{}]},actionClearExample(){this.beforeSlaughterList=[],this.afterSlaughterList=[]},actionToProductSelect(e){o("after"==e?{url:`/pages/meatProcessing/productSelect?mode=${e}&productId=`+this.beforeSlaughterList[0].PRODUCT_ID}:{url:`/pages/meatProcessing/productSelect?mode=${e}`})},actionSlaughterConfirm(){let e=this.afterSlaughterList.map((e=>({...e,proofNumber:this.afterSlaughterList[0].proofNumber})));a.post("sofn-tts-web-branch/ttsScltxxcjSlaRecord/addTtsScltxxcjSlaRecord",{customerList:JSON.stringify(e),entityId:l("userInfo").id,productList:JSON.stringify(this.beforeSlaughterListApiList)},{header:{token:l("token")},toast:!1}).then((e=>{i({title:e.msg,icon:"none"}),200==e.httpCode&&(r(),c("refreshMeatList"))}))},actionSearch(){i({title:"点击搜索",duration:2e3})},actionToDetail(){o({url:"/pages/meatProcessing/detail"})},doSomething(){},ajaxXxx(){},ajaxGetUnitList(){a.post("sofn-tts-web-branch/ttsScltxxcjScgl/getUnits",{id:s.industryCodes.find((e=>"02"===e.num)).code},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:l("token")},toast:!1}).then((e=>{this.unitsList=e}))}}},[["render",function(e,t,a,l,s,o){const i=g,r=n(u("u-navbar"),h),c=C,E=n(u("dw-icon"),f),N=n(u("dw-cell"),S),I=n(u("dw-cell-group"),w),M=G,j=R,Q=d("mySelectBox");return b(),p(i,{class:"processing"},{default:m((()=>[A(r,{title:"屠宰",onRightClick:o.actionSlaughterConfirm,autoBack:!0,placeholder:"",border:""},{right:m((()=>[s.beforeSlaughterList.length&&s.afterSlaughterList.length?(b(),p(i,{key:0,class:"u-nav-slot"},{default:m((()=>[k("确定")])),_:1})):U("",!0)])),_:1},8,["onRightClick"]),A(i,{class:"processing-body"},{default:m((()=>[A(N,null,{extra:m((()=>[0==s.beforeSlaughterList.length?(b(),p(i,{key:0,onClick:t[0]||(t[0]=e=>o.actionToProductSelect("before"))},{default:m((()=>[A(c,{class:"mr2",style:{color:"#3dac6d"}},{default:m((()=>[k("选择产品")])),_:1}),A(E,{name:"right",size:"24rpx",color:"#A4A8B4"})])),_:1})):(b(),p(E,{key:1,name:"edit-square",color:"#3DAC6D",onClick:t[1]||(t[1]=e=>o.actionToProductSelect("before"))}))])),default:m((()=>[A(i,null,{default:m((()=>[k("屠宰前产品")])),_:1})])),_:1}),A(i,null,{default:m((()=>[A(I,null,{default:m((()=>[(b(!0),y(L,null,x(s.beforeSlaughterList,((e,t)=>(b(),p(N,{background:"transparent",key:t},{extra:m((()=>[A(i,null,{default:m((()=>[k("屠宰"),A(c,{class:"ml4 mr4",style:{color:"#F8932D"}},{default:m((()=>[k(V(e.number),1)])),_:2},1024),k(V(e.HARVEST_UNIT),1)])),_:2},1024)])),default:m((()=>[A(i,null,{default:m((()=>[A(i,null,{default:m((()=>[k(V(e.PRODUCT_NAME),1)])),_:2},1024),A(i,{class:"processing-code"},{default:m((()=>[k(V(e.PRODUCT_PC),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),s.beforeSlaughterList.length?(b(),p(i,{key:0},{default:m((()=>[A(N,null,{extra:m((()=>[0==s.afterSlaughterList.length?(b(),p(i,{key:0,onClick:t[2]||(t[2]=e=>o.actionToProductSelect("after"))},{default:m((()=>[A(E,{name:"plus",color:"#3dac6d",size:"24rpx"}),A(c,{class:"mr2",style:{color:"#3dac6d"}},{default:m((()=>[k("选择")])),_:1})])),_:1})):(b(),p(E,{key:1,name:"edit-square",color:"#3DAC6D",onClick:t[3]||(t[3]=e=>o.actionToProductSelect("after"))}))])),default:m((()=>[A(i,{class:"flex items-center"},{default:m((()=>[A(M,{style:{width:"36rpx",height:"36rpx"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAYAAACMRWrdAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowNTU0MTdDNTBERTgxMUU3QUM2OERDRDlGODczRDEzMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxQkEzN0Q4NzJCQkQxMUU3OEI2QkNFNjUwNjE4MzU1MSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxQkEzN0Q4NjJCQkQxMUU3OEI2QkNFNjUwNjE4MzU1MSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpiYzRiYzFlZS1hODkwLTgzNGQtYjNlNy0wMWEwMzE5OWUwZmIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDU1NDE3QzUwREU4MTFFN0FDNjhEQ0Q5Rjg3M0QxMzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4y3vOYAAAEYklEQVR42uyaZ2gUQRiGJ0WNkRiVREQC1oCgoBAlaGyRWAkqKljAs0RFRI2CBcGCAbH8sGPBHgv2jrGjaBQk2FAE9af+EBWsCYoxvsN9q5PJ7O7M7e7lDBl4yO3OXnaendkp31xcVVUVq4spUTz4UJL3X8ukDb3+93M8q6PJVCwBHABjo1jGhmAO3TsQMX6D4yAEDoIRUZLi99wM9pjI6YolgTNgFB03oBsOioKU9QAngb26cjpiTcBFMExxYy7bNwpSVgrpyrmJpYLLoD84AhaC7aCc8pPBeZAdBSkjuUSHvBYk1QPMBxuFvGPgliBfQvJPfZA6AYa7XBeiv1NBpUmNtQQ3Seo32C3l3wYvhePmgA8inTyKpYBMzWsda04l1ppqoysdV4DviuvkKUs6KPJQU03BR5ALXhjI7VPJqcSS6cmJnUe+dE1nxZMtBdM8vFM3qFm/M5SbAHrpiL0GA8Ab4dxhas9poCc4J323lHrNL3Scr9mkxI6iOzVnE7lKKtcd3XfslSSXQgPke3APdHCQGgxO0Tuaadj7mchZUsWm3f0rRc0xRfMTpXqD01ToDAc5py5dR85RSmccc5KTpbJoIE8WrskggXiDccpNzlVKd+ZhJ3cffBU6kxIqSLWVEJhMQ4aulJPcMx0pk7miSm4BzUa60ECerpDiC7wnEUjZyWXpSJnO7lVy48BjanJ+S4lyV2is+hnUekwllxCglPVObbebOvklJsq9VeQFIVVAi1sWtJgllyvJxYyU15iHKBdTUm7LFhO55FiS8kPMkmOxJOV3+C1mpPwUiykpv8SCkEqtbbEgpAppTphZW2JBSE0HG1yWPIGKBSE1EewAccKSpzCaYkFIjaGgjFgeHoabF02xlT5L5VNMJUGSGg9+CaGJtkGLrQVlPkkNBCepFchSlYIUX8ReU6z5fBEL0T/+RAUq8yjFY/5nQSMNqRzQEVyQQg+exfjUazW4CpoZyqmkshWFdJISv1fgpxgP2vAIcTcKA6RqytnNKHg33kQ691CQaqqQ4mkL2Oqn2Aybp+0k5zRNOsRqbijwFrGIpC4ppFaBuexfaL2n0zinI8bHkyHSuT4sHA1OspHTmfsVK+TWUgxFlOIii8FS4VwOtRzbQVxHrICpdzTy6L1oKMmZTGhVcu2EzzxsNwusk6QuUc1mUG/Z2FSM509xyBfHIEtutOEsXSVnSYVoNqKSsq5ZxsI7QkZivAm2cbnGmjVYcuciGONUcvFSWE+W4k10Jgtv9BuvoAs0CzYSHKUbR5qsQKi4mbeG/t6lXlLc3uK7rLsiCQ20Yu5bpo/ATmqO33xY29nJVUjv0RKwKdKYx2Sb/HKqHS70gPmfVHKiVJFQk8ZicbQ2EtNzkuE3/syCTSo5ntaDFV6iVDzS2x78YOFNPN4z3WHRTbLcNhbeCPEUfuvHwr/p2M/CwdDaSsXChGA2q7mhbyy2nMVOKmaaW0fV3qW6+kPM+t8r1ovViwWb/ggwAGCMUc7Gx1ZdAAAAAElFTkSuQmCC"}),A(i,{class:"ml3"},{default:m((()=>[k("屠宰后产品")])),_:1})])),_:1})])),_:1}),A(I,null,{default:m((()=>[(b(!0),y(L,null,x(s.afterSlaughterList,((e,t)=>(b(),p(N,{background:"transparent",key:t},{default:m((()=>[A(i,{class:"after-item"},{default:m((()=>[0==t?(b(),p(i,{key:0,class:"after-item-cell",style:{"margin-bottom":"60rpx"}},{default:m((()=>[A(i,{class:"text-level2 ft14"},{default:m((()=>[k("检疫合格证号")])),_:1}),A(i,{class:"after-item-body processing-input-group col1"},{default:m((()=>[A(i,{class:"processing-checkbox"},{default:m((()=>[A(j,{modelValue:e.proofNumber,"onUpdate:modelValue":t=>e.proofNumber=t,type:"text",placeholder:"请输入检疫合格证号"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024)):U("",!0),A(i,{class:"after-item-cell mt6"},{default:m((()=>[A(i,null,{default:m((()=>[k(V(e.name),1)])),_:2},1024),A(i,null,{default:m((()=>[A(i,{class:"after-item-body processing-input-group col2"},{default:m((()=>[A(i,{class:"processing-checkbox"},{default:m((()=>[A(j,{modelValue:e.slaughterAmount,"onUpdate:modelValue":t=>e.slaughterAmount=t,type:"text",placeholder:"请输入",style:{"text-align":"center"}},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),A(i,{class:"processing-checkbox"},{default:m((()=>[s.unitsList.length?(b(),p(Q,{key:0,onOnChange:t=>o.unitConfirm(e,t),modelValue:e.unit,"onUpdate:modelValue":t=>e.unit=t,placeholder:"请选择",title:"屠宰单位",textAlign:"center",options:s.unitsList.map((e=>e.dictName))},null,8,["onOnChange","modelValue","onUpdate:modelValue","options"])):U("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):U("",!0)])),_:1})])),_:1})}],["__scopeId","data-v-d89beab9"]]);export{E as default};
