import{_ as a,al as e,E as t,T as o,y as s,A as i,x as n,aH as l,G as d,H as c,h as r,w as u,Y as f,ad as h,p as m,a4 as p,M as g,g as k,i as C,k as _,r as b,F as y,l as x,t as j}from"./index-Ci2ntzNm.js";import{_ as L}from"./dw-cell-group.Db-ry5CN.js";import{_ as w}from"./u-button.DGq9rRfM.js";import"./u-loading-icon.CX2H3iv7.js";const I=a({name:"",components:{},data:()=>({timeFormat:e,info:{},isDefault:!0,dataList:[]}),onLoad(a){this.info=JSON.parse(decodeURIComponent(a.info)),console.log(this.info)},watch:{},computed:{},methods:{actionJumpTo(a){t({url:a})},actionSubmit(){let a=this.dataList.filter((a=>a.checked));console.log(a);let e=a.map((a=>a.id));this.dataList[0].inputsName,this.dataList[0].operationTime,this.info.show=e.join(","),this.info.zjfs="自检",this.info.zjjl="合格",o({title:"正在生成批次中",mask:!0}),s.post("sofn-tts-web-branch/ttsTrace/addTtsTrace?id="+i("userInfo").id,{...this.info},{header:{token:i("token")},toast:!1}).then((a=>{200===a.httpCode?(n({title:"生成成功",icon:"none"}),l({url:"/pages/batch/result?id="+a.data.id+"&traceCode="+a.data.traceCode+"&entityIdCode="+a.data.entityIdCode})):n({title:a.msg,icon:"none"})}))},allChange(a){this.dataList.forEach((e=>{e.checked=a}))},itemChange(a,e){e.checked=a},afterRead(){},queryList(a,e){s.post("sofn-tts-web-branch/ttsScltxxcjFarmingTask/getFarmingTaskList?agriId="+this.info.agriProductionId,{agriId:this.info.agriProductionId},{header:{token:i("token")},toast:!1}).then((a=>{a.data.forEach((a=>{a.checked=!1})),this.$refs.paging.complete(a.data)}))},ajaxXxx(){}}},[["render",function(a,e,t,o,s,i){const n=d(c("u-navbar"),f),l=d(c("u-checkbox"),h),I=m,T=d(c("dw-cell"),p),v=d(c("dw-cell-group"),L),F=d(c("z-paging"),g),N=d(c("u-button"),w);return k(),r(I,{class:"traceCode"},{default:u((()=>[C(n,{title:"生成追溯码",autoBack:!0,placeholder:"",border:""}),C(I,{class:"traceCode-body"},{default:u((()=>[C(F,{fixed:!1,ref:"paging",modelValue:s.dataList,"onUpdate:modelValue":e[0]||(e[0]=a=>s.dataList=a),onQuery:i.queryList},{default:u((()=>[C(v,null,{default:u((()=>[(k(!0),_(y,null,b(s.dataList,((a,e)=>(k(),r(T,{key:e},{prefix:u((()=>[C(l,{onChange:e=>i.itemChange(e,a),checked:a.checked,shape:"circle",activeColor:"#00B568"},null,8,["onChange","checked"])])),default:u((()=>[C(I,null,{default:u((()=>[C(I,{class:"flex justify-between"},{default:u((()=>[C(I,null,{default:u((()=>[x(j(a.taskName),1)])),_:2},1024),C(I,null,{default:u((()=>[x("无")])),_:1})])),_:2},1024),C(I,{class:"mt4 ft14 flex justify-between text-level2"},{default:u((()=>[C(I,null,{default:u((()=>[x("负责人:"+j(a.handlerName),1)])),_:2},1024),C(I,null,{default:u((()=>[x("时间: "+j(s.timeFormat(a.operationTime,"yyyy-mm-dd hh:MM:ss")),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue","onQuery"])])),_:1}),C(I,{class:"traceCode-footer"},{default:u((()=>[C(I,{class:"traceCode-footer-checkbox"},{default:u((()=>[C(l,{shape:"circle",onChange:i.allChange,activeColor:"#00B568"},null,8,["onChange"]),x("全选 ")])),_:1}),C(N,{style:{background:"#00b568",color:"#fff"},onClick:i.actionSubmit},{default:u((()=>[x("保存并查看")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-3b0c28f4"]]);export{I as default};
