import{_ as e,$ as t,Q as a,E as s,a6 as o,y as c,A as i,C as l,V as n,G as d,H as r,L as u,k as p,i as h,w as m,F as f,O as g,p as b,a4 as w,Y as k,M as y,N as C,g as T,h as _,ai as x,I as S,l as L,n as I,r as j,J as M}from"./index-CBLTQg_b.js";import{_ as U}from"./dw-card.CeBHaIwR.js";import{P as B}from"./pageFooter.Dkc4ZwLB.js";import{B as J}from"./batchItem.CMpmkHCk.js";import{B as P}from"./batchItem2.DQk1NA4D.js";import{U as q}from"./userMenu.C0xY_mR4.js";import{_ as D}from"./more.DkU1Ligo.js";import"./index.f8_EbUbE.js";const F=e({name:"",components:{UserMenu:q,PageFooter:B,BatchItem:J,BatchItem2:P},data:()=>({isShowUserMenu:!1,isShowMenu:!1,isShowBatchPopup:!1,curTab:"有生产过程批次",dataList:[],dataList2:[]}),onLoad(e){t("refreshBathList",(()=>{this.$nextTick((()=>{setTimeout((()=>{this.$refs.paging2.reload()}),500)}))}))},onUnload(){a("refreshBathList")},watch:{},computed:{},methods:{actionJumpTo(e){s({url:e})},actionDelete(e){o({title:"确认删除该批次？",success:t=>{t.confirm&&c.post("sofn-tts-web-branch/ttsScltxxcjScgl/deleteTtsScltxxcjScgl",{id:e.ID},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:i("token")},toast:!1}).then((e=>{200==e.httpCode?(l("删除成功"),this.$refs.paging2.reload()):l(e.msg)}))}})},initPage(){switch(this.type){case"add":this.pageTitle="新增农事";break;case"edit":this.pageTitle="编辑农事"}n({title:this.pageTitle})},queryList(e,t){console.log("queryList",e,t),console.log("queryList",e,t);let a=10*e;c.post("sofn-tts-web-branch/ttsTrace/getPageInfo",{start:a,length:10,id:i("userInfo").id,keyWord:""},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:i("token")},toast:!1}).then((e=>{this.$refs.paging.complete(e.data.list)}))},queryList2(e,t){let a=10*e;c.post("sofn-tts-web-branch/ttsScltxxcjScgl/getCpdjgl",{start:a,length:"10",entity_id:i("userInfo").id,keyWord:""},{header:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",token:i("token")},toast:!1}).then((e=>{this.$refs.paging2.complete(e.data.list)}))},ajaxXxx(){}}},[["render",function(e,t,a,s,o,c){const i=d(r("dw-icon"),g),l=M,n=b,B=d(r("dw-cell"),w),J=d(r("u-navbar"),k),P=u("BatchItem"),q=d(r("dw-card"),U),F=d(r("z-paging"),y),V=u("BatchItem2"),v=u("PageFooter"),$=d(r("u-popup"),C),Q=u("UserMenu");return T(),p(f,null,[h(n,{class:"batch"},{default:m((()=>[h(J,{title:"批次",placeholder:"",border:""},{left:m((()=>[h(i,{name:"menu",size:"36rpx",onClick:t[0]||(t[0]=e=>o.isShowUserMenu=!0)})])),right:m((()=>["无生产过程批次"===o.curTab?(T(),_(n,{key:0,class:"u-nav-slot batch-nav-slot",onClick:t[5]||(t[5]=e=>o.isShowMenu=!0)},{default:m((()=>[h(l,{src:D,style:{width:"36rpx",height:"36rpx"}}),o.isShowMenu?(T(),_(n,{key:0,class:"batch-menu-mask",onClick:t[1]||(t[1]=x((e=>o.isShowMenu=!1),["stop"]))})):S("",!0),o.isShowMenu?(T(),_(n,{key:1,class:"batch-menu",onClick:t[4]||(t[4]=x((e=>o.isShowMenu=!1),["stop"]))},{default:m((()=>[h(B,{onClick:t[2]||(t[2]=e=>o.isShowBatchPopup=!0)},{default:m((()=>[L(" 新建批次")])),_:1}),h(B,{onClick:t[3]||(t[3]=e=>c.actionJumpTo("/pages/batch/merge"))},{default:m((()=>[L(" 合并批次 ")])),_:1})])),_:1})):S("",!0)])),_:1})):S("",!0)])),_:1}),h(n,{class:"batch-tabs"},{default:m((()=>[h(n,{class:"batch-tabs-group"},{default:m((()=>[h(n,{class:I(["batch-tabs-group-item",{checked:"有生产过程批次"===o.curTab}]),onClick:t[6]||(t[6]=e=>o.curTab="有生产过程批次")},{default:m((()=>[L("有生产过程批次 ")])),_:1},8,["class"]),h(n,{class:I(["batch-tabs-group-item",{checked:"无生产过程批次"===o.curTab}]),onClick:t[7]||(t[7]=e=>o.curTab="无生产过程批次")},{default:m((()=>[L("无生产过程批次 ")])),_:1},8,["class"])])),_:1})])),_:1}),h(n,{class:"batch-body"},{default:m((()=>["有生产过程批次"===o.curTab?(T(),_(F,{key:0,"default-page-no":"0",fixed:!1,ref:"paging",modelValue:o.dataList,"onUpdate:modelValue":t[8]||(t[8]=e=>o.dataList=e),onQuery:c.queryList},{default:m((()=>[(T(!0),p(f,null,j(o.dataList,((e,t)=>(T(),_(q,{"custom-class":"mb12",shape:"square",key:t,onClick:t=>c.actionJumpTo("/pages/batch/detail?id="+e.id+"&entityIdCode="+e.entityIdCode+"&traceCode="+e.traceCode)},{default:m((()=>[h(P,{item:e,onTrace:t=>c.actionJumpTo("/pages/batch/trace?id="+e.id),onHandleCert:t=>c.actionJumpTo("/pages/qualificationCertificate/create?info="+encodeURIComponent(JSON.stringify(e)))},null,8,["item","onTrace","onHandleCert"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["modelValue","onQuery"])):S("",!0),"无生产过程批次"===o.curTab?(T(),_(F,{key:1,"default-page-no":"0",fixed:!1,ref:"paging2",modelValue:o.dataList2,"onUpdate:modelValue":t[9]||(t[9]=e=>o.dataList2=e),onQuery:c.queryList2},{default:m((()=>[(T(!0),p(f,null,j(o.dataList2,((e,t)=>(T(),_(q,{"custom-class":"mb12",shape:"square",key:t,onClick:t=>c.actionJumpTo("/pages/batch/detail2?id="+e.ID)},{default:m((()=>[h(V,{item:e,onReportLoss:t=>c.actionJumpTo("/pages/batch/reportLoss?id="+e.ID),onDelete:t=>c.actionDelete(e)},null,8,["item","onReportLoss","onDelete"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["modelValue","onQuery"])):S("",!0)])),_:1}),h(v,{tabName:"batch"})])),_:1}),h($,{show:o.isShowBatchPopup,mode:"center",bgColor:"transparent",onClose:t[15]||(t[15]=e=>o.isShowBatchPopup=!1)},{default:m((()=>[h(n,{class:"batch-pop"},{default:m((()=>[h(n,{class:"batch-pop-header"},{default:m((()=>[h(n,null,{default:m((()=>[L("请选择行业")])),_:1}),h(n,{onClick:t[10]||(t[10]=e=>o.isShowBatchPopup=!1)},{default:m((()=>[h(i,{name:"close",size:"32rpx"})])),_:1})])),_:1}),h(n,{class:"batch-pop-body"},{default:m((()=>[h(n,{class:"batch-pop-item",onClick:t[11]||(t[11]=e=>c.actionJumpTo("/pages/batch/edit?type=add&catalogue=种植业&num=01"))},{default:m((()=>[L("种植业 ")])),_:1}),h(n,{class:"batch-pop-item",onClick:t[12]||(t[12]=e=>c.actionJumpTo("/pages/batch/edit?type=add&catalogue=畜牧业&num=02"))},{default:m((()=>[L("畜牧业 ")])),_:1}),h(n,{class:"batch-pop-item",onClick:t[13]||(t[13]=e=>c.actionJumpTo("/pages/batch/edit?type=add&catalogue=渔业&num=03"))},{default:m((()=>[L("渔业 ")])),_:1}),h(n,{class:"batch-pop-item",onClick:t[14]||(t[14]=e=>c.actionJumpTo("/pages/batch/edit?type=add&catalogue=其他&num=04"))},{default:m((()=>[L("其他 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["show"]),h($,{show:o.isShowUserMenu,mode:"left",onClose:t[16]||(t[16]=e=>o.isShowUserMenu=!1)},{default:m((()=>[h(n,{style:{width:"65vw",height:"100%",overflow:"hidden"}},{default:m((()=>[h(Q)])),_:1})])),_:1},8,["show"])],64)}],["__scopeId","data-v-3ee37771"]]);export{F as default};
