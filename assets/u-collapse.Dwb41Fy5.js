import{d as e,a as t,_ as a,m as i,b as n,au as l,av as s,ag as o,aw as d,ax as r,s as c,G as u,ah as p,H as h,g as m,h as f,w as b,i as g,aj as y,l as k,t as I,I as v,k as _,F as x,q as w,p as $}from"./index-BdsNz36l.js";import{_ as D,a as B}from"./u-cell.BkABdNqp.js";const C=a({name:"u-collapse-item",mixins:[i,n,e({props:{title:{type:String,default:()=>t.collapseItem.title},value:{type:String,default:()=>t.collapseItem.value},label:{type:String,default:()=>t.collapseItem.label},disabled:{type:Boolean,default:()=>t.collapseItem.disabled},isLink:{type:Boolean,default:()=>t.collapseItem.isLink},clickable:{type:Boolean,default:()=>t.collapseItem.clickable},border:{type:Boolean,default:()=>t.collapseItem.border},align:{type:String,default:()=>t.collapseItem.align},name:{type:[String,Number],default:()=>t.collapseItem.name},icon:{type:String,default:()=>t.collapseItem.icon},duration:{type:Number,default:()=>t.collapseItem.duration},showRight:{type:Boolean,default:()=>t.collapseItem.showRight}}})],data:()=>({elId:l(),animationData:{},expanded:!1,showBorder:!1,animating:!1,parentData:{accordion:!1,border:!1}}),watch:{expanded(e){clearTimeout(this.timer),this.timer=null,this.timer=setTimeout((()=>{this.showBorder=e}),e?10:290)}},mounted(){this.init()},methods:{async init(){if(this.updateParentData(),!this.parent)return s();const{value:e,accordion:t,children:a=[]}=this.parent;if(t){if(o.array(e))return s();this.expanded=this.name==e}else{if(!o.array(e)&&null!==e)return s();this.expanded=(e||[]).some((e=>e==this.name))}await d(),this.setContentAnimate()},updateParentData(){this.getParentData("u-collapse")},async setContentAnimate(){const e=await this.queryRect(),t=this.expanded?e.height:0;this.animating=!0;const a=r({timingFunction:"ease-in-out"});a.height(t).step({duration:this.duration}).step(),this.animationData=a.export(),c(this.duration).then((()=>{this.animating=!1}))},clickHandler(){this.disabled&&this.animating||this.parent&&this.parent.onChange(this)},queryRect(){return new Promise((e=>{this.$uGetRect(`#${this.elId}`).then((t=>{e(t)}))}))}}},[["render",function(e,t,a,i,n,l){const s=w,o=u(h("u-icon"),p),d=u(h("u-cell"),D),r=$,c=u(h("u-line"),B);return m(),f(r,{class:"u-collapse-item"},{default:b((()=>[g(d,{title:e.$slots.title?"":e.title,value:e.value,label:e.label,icon:e.icon,isLink:e.isLink,clickable:e.clickable,border:n.parentData.border&&n.showBorder,onClick:l.clickHandler,arrowDirection:n.expanded?"up":"down",disabled:e.disabled},{title:b((()=>[y(e.$slots,"title",{},(()=>[!e.$slots.title&&e.title?(m(),f(s,{key:0},{default:b((()=>[k(I(e.title),1)])),_:1})):v("",!0)]),!0)])),icon:b((()=>[y(e.$slots,"icon",{},(()=>[!e.$slots.icon&&e.icon?(m(),f(o,{key:0,size:22,name:e.icon},null,8,["name"])):v("",!0)]),!0)])),value:b((()=>[y(e.$slots,"value",{},(()=>[!e.$slots.value&&e.value?(m(),f(s,{key:0},{default:b((()=>[k(I(e.value),1)])),_:1})):v("",!0)]),!0)])),"right-icon":b((()=>[e.showRight?(m(),_(x,{key:0},[e.$slots["right-icon"]?v("",!0):(m(),f(o,{key:0,size:16,name:"arrow-right"})),y(e.$slots,"right-icon",{},void 0,!0)],64)):v("",!0)])),_:3},8,["title","value","label","icon","isLink","clickable","border","onClick","arrowDirection","disabled"]),g(r,{class:"u-collapse-item__content",animation:n.animationData,ref:"animation"},{default:b((()=>[g(r,{class:"u-collapse-item__content__text content-class",id:n.elId,ref:n.elId},{default:b((()=>[y(e.$slots,"default",{},void 0,!0)])),_:3},8,["id"])])),_:3},8,["animation"]),n.parentData.border?(m(),f(c,{key:0})):v("",!0)])),_:3})}],["__scopeId","data-v-7d1be57a"]]);const S=a({name:"u-collapse",mixins:[i,n,e({props:{value:{type:[String,Number,Array,null],default:()=>t.collapse.value},accordion:{type:Boolean,default:()=>t.collapse.accordion},border:{type:Boolean,default:()=>t.collapse.border}}})],watch:{needInit(){this.init()},parentData(){this.children.length&&this.children.map((e=>{"function"==typeof e.updateParentData&&e.updateParentData()}))}},created(){this.children=[]},computed:{needInit(){return[this.accordion,this.value]}},emits:["open","close","change"],methods:{init(){this.children.map((e=>{e.init()}))},onChange(e){let t=[];this.children.map(((a,i)=>{this.accordion?(a.expanded=a===e&&!e.expanded,a.setContentAnimate()):a===e&&(a.expanded=!a.expanded,a.setContentAnimate()),t.push({name:a.name||i,status:a.expanded?"open":"close"})})),this.$emit("change",t),this.$emit(e.expanded?"open":"close",e.name)}}},[["render",function(e,t,a,i,n,l){const s=u(h("u-line"),B),o=$;return m(),f(o,{class:"u-collapse"},{default:b((()=>[e.border?(m(),f(s,{key:0})):v("",!0),y(e.$slots,"default",{},void 0,!0)])),_:3})}],["__scopeId","data-v-02f3ed75"]]);export{C as _,S as a};
